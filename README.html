<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.6: http://docutils.sourceforge.net/" />
<title>SyncEvolution</title>
<meta name="date" content="2011-07-17" />
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 5951 2009-05-18 18:03:10Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left{
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: left }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="syncevolution">
<h1 class="title">SyncEvolution</h1>
<h2 class="subtitle" id="synchronize-personal-information-management-data">synchronize personal information management data</h2>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr class="field"><th class="docinfo-name">Manual section:</th><td class="field-body">1</td>
</tr>
<tr><th class="docinfo-name">Version:</th>
<td>1.1.99.5b</td></tr>
<tr><th class="docinfo-name">Date:</th>
<td>2011-07-17</td></tr>
</tbody>
</table>
<div class="section" id="synopsis">
<h3>SYNOPSIS</h3>
<dl class="docutils">
<dt>Show available sources:</dt>
<dd>syncevolution</dd>
<dt>Show information about configuration(s):</dt>
<dd>syncevolution --print-servers|--print-configs|--print-peers</dd>
<dt>Show information about a specific configuration:</dt>
<dd>syncevolution --print-config [--quiet] [--] &lt;config&gt; [main|&lt;source&gt; ...]</dd>
<dt>List sessions:</dt>
<dd>syncevolution --print-sessions [--quiet] [--] &lt;config&gt;</dd>
<dt>Show information about SyncEvolution:</dt>
<dd>syncevolution --help|-h|--version</dd>
<dt>Run a synchronization as configured:</dt>
<dd>syncevolution &lt;config&gt; [&lt;source&gt; ...]</dd>
<dt>Run a synchronization with properties changed just for this run:</dt>
<dd>syncevolution --run &lt;options for run&gt; [--] &lt;config&gt; [&lt;source&gt; ...]</dd>
<dt>Restore data from the automatic backups:</dt>
<dd>syncevolution --restore &lt;session directory&gt; --before|--after [--dry-run] [--] &lt;config&gt; &lt;source&gt; ...</dd>
<dt>Create, update or remove a configuration:</dt>
<dd>syncevolution --configure &lt;options&gt; [--] &lt;config&gt; [&lt;source&gt; ...]
syncevolution --remove|--migrate &lt;options&gt; [--] &lt;config&gt;</dd>
<dt>List items:</dt>
<dd>syncevolution --print-items [--] &lt;config&gt; &lt;source&gt;</dd>
<dt>Export item(s):</dt>
<dd>syncevolution [--delimiter &lt;string&gt;] --export &lt;dir&gt;|&lt;file&gt;|- [--] &lt;config&gt; &lt;source&gt; [&lt;luid&gt; ...]</dd>
<dt>Add item(s):</dt>
<dd>syncevolution [--delimiter &lt;string&gt;|none] --import &lt;dir&gt;|&lt;file&gt;|- [--] &lt;config&gt; &lt;source&gt;</dd>
<dt>Update item(s)</dt>
<dd>syncevolution --update &lt;dir&gt; [--] &lt;config&gt; &lt;source&gt;
syncevolution [--delimiter &lt;string&gt;|none] --update &lt;file&gt;|- [--] &lt;config&gt; &lt;source&gt; &lt;luid&gt; ...</dd>
<dt>Remove item(s):</dt>
<dd>syncevolution --delete-items [--] &lt;config&gt; &lt;source&gt; (&lt;luid&gt; ... | *)</dd>
</dl>
</div>
<div class="section" id="description">
<h3>DESCRIPTION</h3>
<p>This text explains the usage of the SyncEvolution command line.</p>
<p>SyncEvolution synchronizes personal information management (PIM) data
such as contacts, appointments, tasks and memos using the Synthesis
sync engine, which provides support for the SyncML synchronization
protocol.</p>
<p>SyncEvolution synchronizes with SyncML servers over HTTP and with
SyncML capable phones locally over Bluetooth (new in 1.0). Plugins
provide access to the data which is to be synchronized. Binaries are
available for Linux desktops (synchronizing data in GNOME Evolution,
with KDE supported indirectly already and Akonadi support in
development), for MeeGo (formerly Moblin) and for Maemo 5/Nokia
N900. The source code can be compiled for Unix-like systems and
provides a framework to build custom SyncML clients or servers.</p>
</div>
<div class="section" id="usage">
<h3>USAGE</h3>
<p>The &lt;config&gt; and the &lt;source&gt; strings are used to find the
configuration files which determine how synchronization is going to
proceed. Each source corresponds to one local address book, calendar,
task list or set of memos and the corresponding database on the
peer. Depending on which parameters are given, different operations
are executed.</p>
<p>Starting with SyncEvolution 1.0, &lt;config&gt; strings can have different
meanings. Typically, a simple string like <cite>memotoo</cite> refers to
the configuration for that peer, as it did in previous releases. A
peer is either a SyncML server (the traditional usage of
SyncEvolution) or a client (the new feature in 1.0).</p>
<p>Each peer configuration exists inside a specific context, typically
the <cite>&#64;default</cite> context. All peers in the same context share some parts
of their configuration, for example, which local databases are to be
synchronized.  In that sense, a configuration context can be seen as a
set of local databases plus the peer configurations that are
synchronized against those databases.</p>
<p>The peer-independent properties of a source can be configured by
giving the context name as &lt;config&gt; parameter (&quot;&#64;default
addressbook&quot;). Operations manipulating the local data also accept
the context name.</p>
<p>When different peers are meant to synchronize different local
databases, then different contexts have to be used when setting up the
peers by appending a context name after the <cite>at</cite> sign, as in
<cite>memotoo2&#64;other-context</cite>. Later on, if <cite>memotoo2</cite> is
unique, the <cite>&#64;other-context</cite> suffix becomes optional.</p>
<p>Sometimes it is also useful to change configuration options of a
context, without modifying a specific peer. This can be done by using
<cite>&#64;default</cite> (or some other context name) without anything before the
<cite>at</cite> sign. The empty string &quot;&quot; is the same as <cite>&#64;default</cite>.</p>
<pre class="literal-block">
syncevolution
</pre>
<p>If no arguments are given, then SyncEvolution will list all available
data sources regardless whether there is a configuration file for them
or not. The output includes the identifiers which can then be used to
select those sources in a configuration file. For each source one can
set a different synchronization mode in its configuration file.</p>
<pre class="literal-block">
syncevolution &lt;config&gt;
</pre>
<p>Without the optional list of sources, all sources which are enabled in
their configuration file are synchronized.</p>
<pre class="literal-block">
syncevolution &lt;config&gt; &lt;source&gt; ...
</pre>
<p>Otherwise only the ones mentioned on the command line are active. It
is possible to configure sources without activating their
synchronization: if the synchronization mode of a source is set to
<cite>disabled</cite>, the source will be ignored. Explicitly listing such a
source will synchronize it in <cite>two-way</cite> mode once.</p>
<p>In SyncEvolution's predefined configuration templates, the following
names for sources are used. Different names can be chosen for sources
that are defined manually.</p>
<blockquote>
<ul class="simple">
<li>addressbook: a list of contacts</li>
<li>calendar: calendar <em>events</em></li>
<li>memo: plain text notes</li>
<li>todo: task list</li>
<li>calendar+todo: a virtual source combining one local &quot;calendar&quot; and
one &quot;todo&quot; source (required for synchronizing with some phones)</li>
</ul>
</blockquote>
<p>Progress and error messages are written into a log file that is
preserved for each synchronization run. Details about that is found in
the <cite>Automatic Backups and Logging</cite> section below. All errors and
warnings are printed directly to the console in addition to writing
them into the log file. Before quitting SyncEvolution will print a
summary of how the local data was modified.  This is done with the
<cite>synccompare</cite> utility script described in the <cite>Exchanging Data</cite>
section.</p>
<p>When the <cite>logdir</cite> option is enabled (since v0.9 done by default for
new configurations), then the same comparison is also done before the
synchronization starts.</p>
<p>In case of a severe error the synchronization run is aborted
prematurely and SyncEvolution will return a non-zero value. Recovery
from failed synchronization is done by forcing a full synchronization
during the next run, i.e. by sending all items and letting the SyncML
server compare against the ones it already knows. This is avoided
whenever possible because matching items during a slow synchronization
can lead to duplicate entries.</p>
<p>After a successful synchronization the server's configuration file is
updated so that the next run can be done incrementally.  If the
configuration file has to be recreated e.g. because it was lost, the
next run recovers from that by doing a full synchronization. The risk
associated with this is that the server might not recognize items that
it already has stored previously which then would lead to duplication
of items.</p>
<pre class="literal-block">
syncevolution --configure &lt;options for configuration&gt; &lt;config&gt; [&lt;source&gt; ...]
</pre>
<p>Options in the configuration can be modified via the command
line. Source properties are changed for all sources unless sources are
listed explicitly.  Some source properties have to be different for
each source, in which case syncevolution must be called multiple times
with one source listed in each invocation.</p>
<pre class="literal-block">
syncevolution --remove &lt;config&gt;
</pre>
<p>Deletes the configuration. If the &lt;config&gt; refers to a specific
peer, only that peer's configuration is removed. If it refers to
a context, that context and all peers inside it are removed.</p>
<p>Note that there is no confirmation question. Neither local data
referenced by the configuration nor the content of log dirs are
deleted.</p>
<pre class="literal-block">
syncevolution --run &lt;options for run&gt; &lt;config&gt; [&lt;source&gt; ...]
</pre>
<p>Options can also be overridden for just the current run, without
changing the configuration. In order to prevent accidentally running a
sync session when a configuration change was intended, either
--configure or --run must be given explicitly if options are specified
on the command line.</p>
<pre class="literal-block">
syncevolution --status &lt;config&gt; [&lt;source&gt; ...]
</pre>
<p>Prints what changes were made locally since the last synchronization.
Depends on access to database dumps from the last run, so using the
<cite>logdir</cite> option is recommended.</p>
<pre class="literal-block">
syncevolution --print-servers|--print-configs|--print-peers
syncevolution --print-config [--quiet] &lt;config&gt; [main|&lt;source&gt; ...]
syncevolution --print-sessions [--quiet] &lt;config&gt;
</pre>
<p>These commands print information about existing configurations. When
printing a configuration a short version without comments can be
selected with --quiet. When sources are listed, only their
configuration is shown. <cite>Main</cite> instead or in combination with sources
lists only the main peer configuration.</p>
<pre class="literal-block">
syncevolution --restore &lt;session directory&gt; --before|--after
              [--dry-run] &lt;config&gt; &lt;source&gt; ...
</pre>
<p>This restores local data from the backups made before or after a
synchronization session. The --print-sessions command can be used to
find these backups. The source(s) have to be listed explicitly. There
is intentionally no default, because as with --remove there is no
confirmation question. With --dry-run, the restore is only simulated.</p>
<p>The session directory has to be specified explicitly with its path
name (absolute or relative to current directory). It does not have to
be one of the currently active log directories, as long as it contains
the right database dumps for the selected sources.</p>
<p>A restore tries to minimize the number of item changes (see section
<a class="reference internal" href="#item-changes-and-data-changes">Item Changes and Data Changes</a>). This means that items that are
identical before and after the change will not be transmitted anew to
the server during the next synchronization. If the server somehow
needs to get a clean copy of all items on the client then, use &quot;--sync
refresh-from-client&quot; in the next run.</p>
<pre class="literal-block">
syncevolution --print-items &lt;config&gt; &lt;source&gt;
syncevolution [--delimiter &lt;string&gt;] --export &lt;dir&gt;|&lt;file&gt;|- &lt;config&gt; &lt;source&gt; [&lt;luid&gt; ...]
syncevolution [--delimiter &lt;string&gt;|none] --import &lt;dir&gt;|&lt;file&gt;|- &lt;config&gt; &lt;source&gt;
syncevolution --update &lt;dir&gt; &lt;config&gt; &lt;source&gt;
syncevolution [--delimiter &lt;string&gt;|none] --update &lt;file&gt;|- &lt;config&gt; &lt;source&gt; &lt;luid&gt; ...
syncevolution --delete-items &lt;config&gt; &lt;source&gt; (&lt;luid&gt; ... | *)
</pre>
<p>Restore depends on the specific format of the automatic backups
created by SyncEvolution. Arbitrary access to item data is provided
with additional options. &lt;luid&gt; here is the unique local identifier
assigned to each item in the source, transformed so that it contains
only alphanumeric characters, dash and underscore. A star * in
--delete-items selects all items for deletion.</p>
<p>&lt;config&gt; and &lt;source&gt; must be given, but they do not have to refer to
existing configurations. In that case, the desired backend and must be
give via &quot;--source-property type=&lt;backend&gt;&quot;, like this:</p>
<pre class="literal-block">
syncevolution --print-items --source-property type=evolution-contacts dummy-config dummy-source
</pre>
<p>The desired backend database can be chosen via &quot;--source-property database&quot;.</p>
</div>
<div class="section" id="options">
<h3>OPTIONS</h3>
<p>Here is a full description of all &lt;options&gt; that can be put in front
of the server name. Whenever an option accepts multiple values, a
question mark can be used to get the corresponding help text and/or
a list of valid values.</p>
<dl class="docutils">
<dt>--sync|-s &lt;mode&gt;|?</dt>
<dd>Temporarily synchronize the active sources in that mode. Useful
for a <cite>refresh-from-server</cite> or <cite>refresh-from-client</cite> sync which
clears all data at one end and copies all items from the other.</dd>
<dt>--print-servers|--print-configs|--print-peers</dt>
<dd>Prints the names of all configured peers to stdout. There is no
difference between these options, the are just aliases.</dd>
<dt>--print-servers|--print-configs|--print-peers|-p</dt>
<dd>Prints the complete configuration for the selected &lt;config&gt;
to stdout, including up-to-date comments for all properties. The
format is the normal .ini format with source configurations in
different sections introduced with [&lt;source&gt;] lines. Can be combined
with --sync-property and --source-property to modify the configuration
on-the-fly. When one or more sources are listed after the &lt;config&gt;
name on the command line, then only the configs of those sources are
printed. <cite>main</cite> selects the main configuration instead of source
configurations. Using --quiet suppresses the comments for each property.
When setting a --template, then the reference configuration for
that peer is printed instead of an existing configuration.</dd>
<dt>--print-sessions</dt>
<dd>Prints information about previous synchronization sessions for the
selected peer or context are printed. This depends on the <cite>logdir</cite>
option.  The information includes the log directory name (useful for
--restore) and the synchronization report. In combination with
--quiet, only the paths are listed.</dd>
<dt>--configure|-c</dt>
<dd><p class="first">Modify the configuration files for the selected peer and/or sources.</p>
<p>If no such configuration exists, then a new one is created using one
of the template configurations (see --template option). Choosing a
template sets most of the relevant properties for the peer and the
default set of sources (see above for a list of those). Anything
specific to the user (like username/password) still has to be set
manually.</p>
<p>When creating a new configuration and listing sources explicitly on the
command line, only those sources will be set to active in the new
configuration, i.e. <cite>syncevolution -c memotoo addressbook</cite>
followed by <cite>syncevolution memotoo</cite> will only synchronize the
address book. The other sources are created in a disabled state.
When modifying an existing configuration and sources are specified,
then the source properties of only those sources are modified.</p>
<p>By default, creating a config requires a template. Source names on the
command line must match those in the template. This allows catching
typos in the peer and source names. But it also prevents some advanced
use cases. Therefore it is possible to disable these checks in two ways:</p>
<pre class="last literal-block">
- use `--template none` or
- specify all required sync and source properties that are normally
  in the templates on the command line (syncURL, backend, ...)
</pre>
</dd>
<dt>--run|-r</dt>
<dd>To prevent accidental sync runs when a configuration change was
intended, but the <cite>--configure</cite> option was not used, <cite>--run</cite> must be
specified explicitly when sync or source properties are selected
on the command line and they are meant to be used during a sync
session triggered by the invocation.</dd>
<dt>--migrate</dt>
<dd><p class="first">In older SyncEvolution releases a different layout of configuration files
was used. Using --migrate will automatically migrate to the new
layout and rename the &lt;config&gt; into &lt;config&gt;.old to prevent accidental use
of the old configuration. WARNING: old SyncEvolution releases cannot
use the new configuration!</p>
<p>The switch can also be used to migrate a configuration in the current
configuration directory: this preserves all property values, discards
obsolete properties and sets all comments exactly as if the configuration
had been created from scratch. WARNING: custom comments in the
configuration are not preserved.</p>
<p class="last">--migrate implies --configure and can be combined with modifying
properties.</p>
</dd>
<dt>--print-items</dt>
<dd>Shows all existing items using one line per item using
the format &quot;&lt;luid&gt;[: &lt;short description&gt;]&quot;. Whether the description
is available depends on the backend and the kind of data that it
stores.</dd>
<dt>--export</dt>
<dd><p class="first">Writes all items in the source or all items whose &lt;luid&gt; is
given into a directory if the --export parameter exists and is a
directory. The &lt;luid&gt; of each item is used as file name. Otherwise it
creates a new file under that name and writes the selected items
separated by the chosen delimiter string. stdout can be selected with
a dash.</p>
<p>The default delimiter (two line breaks) matches a blank line. As a special
case, it also matches a blank line with DOS line ending (line break,
carriage return, line break). This works for vCard 3.0 and iCalendar 2.0,
which never contain blank lines.</p>
<p class="last">When exporting, the default delimiter will always insert two line
breaks regardless whether the items contain DOS line ends. As a
special case, the initial newline of a delimiter is skipped if the
item already ends in a newline.</p>
</dd>
<dt>--import</dt>
<dd>Adds all items found in the directory or input file to the
source.  When reading from a directory, each file is treated as one
item. Otherwise the input is split at the chosen delimiter. &quot;none&quot; as
delimiter disables splitting of the input.</dd>
<dt>--update</dt>
<dd>Overwrites the content of existing items. When updating from a
directory, the name of each file is taken as its luid. When updating
from file or stdin, the number of luids given on the command line
must match with the number of items in the input.</dd>
<dt>--delete-items</dt>
<dd>Removes the specified items from the source. Most backends print
some progress information about this, but besides that, no further
output is produced. Trying to remove an item which does not exist
typically leads to an ERROR message, but is not reflected in a
non-zero result of the command line invocation itself because the
situation is not reported as an error by backends (removal of
non-existent items is not an error in SyncML). Use a star * instead
or in addition to listing individual luids to delete all items.</dd>
<dt>--sync-property|-y &lt;property&gt;=&lt;value&gt;|&lt;property&gt;=?|?</dt>
<dd><p class="first">Overrides a source-independent configuration property for the
current synchronization run or permanently when --configure is used
to update the configuration. Can be used multiple times.  Specifying
an unused property will trigger an error message.</p>
<p>The &lt;property&gt; has the following format: <tt class="docutils literal"><span class="pre">&lt;name&gt;[&#64;&lt;context&gt;|&#64;&lt;peer&gt;&#64;&lt;context&gt;]</span></tt></p>
<p>The optional &lt;context&gt; or &lt;peer&gt;&#64;&lt;context&gt; suffix limits the scope
of the value to that particular configuration. This is currently
only useful for a local sync, which involves a source and a target
configuration.</p>
<p>A string without a second &#64; sign inside is always interpreted as a
context name, so in contrast to the &lt;server&gt; string, &quot;foo&quot; cannot be
used to reference the &quot;<a class="reference external" href="mailto:foo&#64;default">foo&#64;default</a>&quot; configuration. Use the full name
including the context for that.</p>
<p>When no config or context is specified explicitly, a value is
changed in all active configs, typically the one given with
<tt class="docutils literal">&lt;server&gt;</tt>.  The priority of multiple values for the same config
is <cite>more specific definition wins</cite>, so <tt class="docutils literal"><span class="pre">&lt;peer&gt;&#64;&lt;context&gt;</span></tt>
overrides <tt class="docutils literal">&#64;&lt;context&gt;</tt>, which overrides <cite>no suffix given</cite>.
Specifying some suffix which does not apply to the current operation
does not trigger an error, so beware of typos.</p>
<p class="last">When using the configuration layout introduced with 1.0, some of the
sync properties are shared between peers, for example the directory
where sessions are logged. Permanently changing such a shared
property for one peer will automatically update the property for all
other peers in the same context because the property is stored in a
shared config file. When printing a config in verbose mode, a summary
comment shows which properties are shared in which way.</p>
</dd>
<dt>--source-property|-z &lt;property&gt;=&lt;value&gt;|&lt;property&gt;=?|?</dt>
<dd><p class="first">Same as --sync-property, but applies to the configuration of all active
sources. <cite>--sync &lt;mode&gt;</cite> is a shortcut for <cite>--source-property sync=&lt;mode&gt;</cite>.</p>
<p>The &lt;property&gt; has the following format: <tt class="docutils literal"><span class="pre">[&lt;source&gt;/]&lt;name&gt;[&#64;&lt;context&gt;|&#64;&lt;peer&gt;&#64;&lt;context&gt;]</span></tt></p>
<p>In it's simplest form without &lt;source&gt;, &lt;context&gt; or &lt;config&gt;,
the name specifies one of the know properties.
When combined with <cite>--configure</cite>, the configuration of all sources
is modified. The value is applied to all sources unless sources are
listed explicitly on the command line. So if you want to change a
source property of just one specific sync source, then use
<cite>--configure --source-property ... &lt;server&gt; &lt;source&gt;</cite>.</p>
<p>Adding the &lt;source&gt;/ prefix makes it possible to set the same
property differently for different sources in one command:</p>
<pre class="literal-block">
--configure --source-property addressbook/sync=two-way \
            --source-property calendar/sync=one-way-from-server \
            &lt;server&gt;
</pre>
<p>If the same property is set both with and without a &lt;source&gt;/ prefix,
then the more specific value with that prefix is used for that source,
regardless of the order on the command line. The following command
disables all sources except for the addressbook:</p>
<pre class="literal-block">
--configure --source-property addressbook/sync=none \
            --source-property sync=two-way \
            &lt;server&gt;
</pre>
<p class="last">As with sync properties, some properties are shared between peers,
in particular the selection of which local data to synchronize.  The
optional configuration suffix in <tt class="docutils literal">&lt;property&gt;</tt> also has the same
meaning as for sync properties. That suffix is checked first, so
&quot;sync&#64;foo&#64;default&quot; overrides &quot;addressbook/sync&quot;, even though
&quot;addressbook/sync&quot; normally overrides &quot;sync&quot;.</p>
</dd>
<dt>--template|-l &lt;peer name&gt;|default|?&lt;device&gt;</dt>
<dd><p class="first">Can be used to select from one of the built-in default configurations
for known SyncML peers. Defaults to the &lt;config&gt; name, so --template
only has to be specified when creating multiple different configurations
for the same peer, or when using a template that is named differently
than the peer. <cite>default</cite> is an alias for <cite>memotoo</cite> and can be
used as the starting point for servers which do not have a built-in
template.</p>
<p>A pseudo-random device ID is generated automatically. Therefore setting
the <cite>deviceId</cite> sync property is only necessary when manually recreating a
configuration or when a more descriptive name is desired.</p>
<p class="last">The available templates for different known SyncML servers are listed when
using a single question mark instead of template name. When using the
<cite>?&lt;device&gt;</cite> format, a fuzzy search for a template that might be
suitable for talking to such a device is done. The matching works best
when using <cite>&lt;device&gt; = &lt;Manufacturer&gt; &lt;Model&gt;</cite>. If you don't know the
manufacturer, you can just keep it as empty. The output in this mode
gives the template name followed by a short description and a rating how well
the template matches the device (100% is best).</p>
</dd>
<dt>--status|-t</dt>
<dd>The changes made to local data since the last synchronization are
shown without starting a new one. This can be used to see in advance
whether the local data needs to be synchronized with the server.</dd>
<dt>--quiet|-q</dt>
<dd>Suppresses most of the normal output during a synchronization. The
log file still contains all the information.</dd>
<dt>--keyring|-k</dt>
<dd><p class="first">Save or retrieve passwords from the GNOME keyring when modifying the
configuration or running a synchronization. Note that using this option
applies to <em>all</em> passwords in a configuration, so setting a single
password as follows moves the other passwords into the keyring, if
they were not stored there already:</p>
<pre class="literal-block">
--keyring --configure --sync-property proxyPassword=foo
</pre>
<p>When passwords were stored in the keyring, their value is set to a single
hyphen (&quot;-&quot;) in the configuration. This means that when running a
synchronization without the --keyring argument, the password has to be
entered interactively. The --print-config output always shows &quot;-&quot; instead
of retrieving the password from the keyring.</p>
<p class="last">The SyncEvolution daemon always uses the GNOME keyring, regardless of
the --keyring command line parameter. Therefore --keyring only has an
effect in combination with --daemon=no, or when SyncEvolution was compiled
without daemon support (not the default).</p>
</dd>
<dt>--daemon[=yes/no]</dt>
<dd>By default, the SyncEvolution command line is executed inside the
syncevo-dbus-server process. This ensures that synchronization sessions
started by the command line do not conflict with sessions started
via some other means (GUI, automatically). For debugging purposes
or very special use cases (running a local sync against a server which
executes inside the daemon) it is possible to execute the operation
without the daemon (--daemon=no).</dd>
<dt>--help|-h</dt>
<dd>Prints usage information.</dd>
<dt>--version</dt>
<dd>Prints the SyncEvolution version.</dd>
</dl>
</div>
<div class="section" id="examples">
<h3>EXAMPLES</h3>
<p>List the known configuration templates:</p>
<pre class="literal-block">
syncevolution --template ?
</pre>
<p>Create a new configuration, using the existing Memotoo template:</p>
<pre class="literal-block">
syncevolution --configure \
              username=123456 \
              &quot;password=!&#64;#ABcd1234&quot; \
              memotoo
</pre>
<p>Note that putting passwords into the command line, even for
short-lived processes as the one above, is a security risk in shared
environments, because the password is visible to everyone on the
machine. To avoid this, remove the password from the command above,
then add the password to the right config.ini file with a text editor.
This command shows the directory containing the file:</p>
<pre class="literal-block">
syncevolution --print-configs
</pre>
<p>Review configuration:</p>
<pre class="literal-block">
syncevolution --print-config memotoo
</pre>
<p>Synchronize all sources:</p>
<pre class="literal-block">
syncevolution memotoo
</pre>
<p>Deactivate all sources:</p>
<pre class="literal-block">
syncevolution --configure \
              sync=none \
              memotoo
</pre>
<p>Activate address book synchronization again, using the --sync shortcut:</p>
<pre class="literal-block">
syncevolution --configure \
              --sync two-way \
              memotoo addressbook
</pre>
<p>Change the password for a configuration:</p>
<pre class="literal-block">
syncevolution --configure \
              password=foo \
              memotoo
</pre>
<p>Set up another configuration for under a different account, using
the same default databases as above:</p>
<pre class="literal-block">
syncevolution --configure \
              username=joe \
              password=foo \
              --template memotoo \
              memotoo_joe
</pre>
<p>Set up another configuration using the same account, but different
local databases (can be used to simulate synchronizing between two
clients, see <a class="reference internal" href="#exchanging-data">Exchanging Data</a>:</p>
<pre class="literal-block">
syncevolution --configure \
              username=123456 \
              password=!&#64;#ABcd1234&quot; \
              sync=none \
              memotoo&#64;other

syncevolution --configure \
              --source-property database=&lt;name of other address book&gt; \
              &#64;other addressbook

syncevolution --configure \
              sync=two-way \
              memotoo&#64;other addressbook

syncevolution memotoo
syncevolution memotoo&#64;other
</pre>
<p>Migrate a configuration from the &lt;= 0.7 format to the current one
and/or updates the configuration so that it looks like configurations
created anew with the current syncevolution:</p>
<pre class="literal-block">
syncevolution --migrate memotoo
</pre>
</div>
<div class="section" id="synchronization-beyond-syncml">
<h3>Synchronization beyond SyncML</h3>
<p>In the simple examples above, SyncEvolution exchanges data with
servers via the SyncML protocol. Starting with release 1.2,
SyncEvolution also supports other protocols like CalDAV and
CardDAV.</p>
<p>These protocols are implemented in backends which look like data
sources. SyncEvolution then synchronizes data between a pair of
backends. Because the entire sync logic (matching of items, merging)
is done locally by SyncEvolution, this mode of operation is called
<em>local sync</em>.</p>
<p>Some examples of things that can be done with local sync:</p>
<ul class="simple">
<li>synchronize events with a CalDAV server and contacts with a CardDAV server</li>
<li>mirror a local database as items in a directory, with format conversion
and one-way or two-way data transfer (export vs. true syncing)</li>
</ul>
<p>Because local sync involves two sides, two configurations are
needed. One is called the <em>target config</em>. By convention it must be
called <tt class="docutils literal"><span class="pre">target-config&#64;&lt;some</span> context name&gt;</tt>, for example
<tt class="docutils literal"><span class="pre">target-config&#64;google-calendar</span></tt>. The target config holds properties
which apply to all sources inside that context, like user name,
password and URL for the server. Once configured, the target config
can be used to list/import/export/update items via the SyncEvolution
command line. It cannot be used for synchronization because it does
not defined what the items are supposed to be synchronized with.</p>
<p>For synchronization, a second <em>sync config</em> is needed. This config has
the same role as the traditional SyncML configs and is typically
defined in the same implicit <tt class="docutils literal">&#64;default</tt> context as those
configs. All configs in that context use the same local data. The sync
config defines the database pairs and the sync mode (one-way, two-way, ...).</p>
<p>The first step is to select a target config with
<tt class="docutils literal"><span class="pre">syncURL=local://&#64;&lt;some</span> context name&gt;</tt>. Multiple sync configs can
access the same target config. In the second step, the <tt class="docutils literal">uri</tt> of each
source in the sync config must be set to the name of the corresponding
source in the target config.  The <tt class="docutils literal">sync</tt> property in the sync config
defines the direction of the data flow. It can be set temporarily when
starting a synchronzation with the sync config.</p>
<blockquote>
<strong>Warning:</strong> in local sync, the sync config side acts as
server. Therefore the <tt class="docutils literal"><span class="pre">from-server</span></tt> variants
(<tt class="docutils literal"><span class="pre">one-way-from-server</span></tt>, <tt class="docutils literal"><span class="pre">refresh-from-server</span></tt>) transfer data
from the sync config into the target config. The <tt class="docutils literal"><span class="pre">from-client</span></tt>
variants transfer in the other direction, even if the target config
happens to access data on a remote server.</blockquote>
</div>
<div class="section" id="caldav-and-carddav">
<h3>CalDAV and CardDAV</h3>
<p>This section explains how to use local syncing for CalDAV and
CardDAV. Both protocols are based on WebDAV and are provided by the
same backend. They share <tt class="docutils literal">username/password/syncURL</tt> properties
defined in their target config.</p>
<p>The credentials must be provided if the server is password
protected. The <tt class="docutils literal">syncURL</tt> is optional if the <tt class="docutils literal">username</tt> is an email
address and the server supports auto-discovery of its CalDAV and/or
CardDAV services (using DNS SRV entries, <tt class="docutils literal"><span class="pre">.well-known</span></tt> URIs, properties
of the current principal, ...).</p>
<p>The <tt class="docutils literal">database</tt> property of each source can be set to the URL of a
specific <em>collection</em> (= database in WebDAV terminology). If not set,
then the WebDAV backend first locates the server based on <tt class="docutils literal">username</tt>
or <tt class="docutils literal">syncURL</tt> and then scans it for the default event resp. contact
collection. This is done once in the initial synchronization. At the end
of a successful synchroniation, the automatic choice is made permanent
by setting the <tt class="docutils literal">database</tt> property.</p>
<blockquote>
<strong>Warning:</strong> the protocols do not uniquely identify this default
collection. The backend tries to make an educated guess, but it might
pick the wrong one if the server provides more than one address book
or calendar. A future version of SyncEvolution will support listing
the available collections, but 1.2 does not yet support that.</blockquote>
<p>Configuration templates for Google Calendar, Yahoo Calendar and a
generic CalDAV/CardDAV server are included in SyncEvolution. The Yahoo
template also contains an entry for contact synchronization, but using
it is not recommended due to known server-side issues.</p>
<p>The following commands set up synchronization with a generic WebDAV
server that supports CalDAV, CardDAV and auto-discovery. For Google and Yahoo,
replace <tt class="docutils literal">webdav</tt> with <tt class="docutils literal"><span class="pre">google-calendar</span></tt> resp. <tt class="docutils literal">yahoo</tt> and remove the
<tt class="docutils literal">addressbook</tt> source when setting up the sync config.</p>
<pre class="literal-block">
# configure target config
syncevolution --configure \
             --template webdav \
             username=123456 \
             password=!&#64;#ABcd1234&quot; \
             target-config&#64;webdav

# configure sync config
syncevolution --configure \
              --template SyncEvolution_Client \
              username= \
              password= \
              webdav \
              calendar addressbook

# initial slow sync
syncevolution --sync slow webdav

# incremental sync
syncevolution webdav
</pre>
</div>
<div class="section" id="notes">
<h3>NOTES</h3>
<div class="section" id="exchanging-data">
<h4>Exchanging Data</h4>
<p>SyncEvolution transmits address book entries as vCard 2.1 or 3.0
depending on the type chosen in the configuration. Evolution uses
3.0 internally, so SyncEvolution converts between the two formats as
needed. Calendar items and tasks can be sent and received in iCalendar
2.0 as well as vCalendar 1.0, but vCalendar 1.0 should be avoided if
possible because it cannot represent all data that Evolution stores.</p>
<div class="note">
<p class="first admonition-title">Note</p>
<p class="last">The Evolution backends are mentioned as examples;
the same applies to other data sources.</p>
</div>
<p>How the server stores the items depends on its implementation and
configuration. To check which data is preserved, one can use this
procedure (described for contacts, but works the same way for
calendars and tasks):</p>
<ol class="arabic simple">
<li>synchronize the address book with the server</li>
<li>create a new address book in Evolution and view it in Evolution
once (the second step is necessary in at least Evolution 2.0.4
to make the new address book usable in SyncEvolution)</li>
<li>add a configuration for that second address book and the
same URI on the SyncML server, see <a class="reference internal" href="#examples">EXAMPLES</a> above</li>
<li>synchronize again, this time using the other data source</li>
</ol>
<p>Now one can either compare the address books in Evolution or do that
automatically, described here for contacts:</p>
<ul class="simple">
<li>save the complete address books: mark all entries, save as vCard</li>
<li>invoke <cite>synccompare</cite> with two file names as arguments and it will
normalize and compare them automatically</li>
</ul>
<p>Normalizing is necessary because the order of cards and their
properties as well as other minor formatting aspects may be
different. The output comes from a side-by-side comparison, but
is augmented by the script so that the context of each change
is always the complete item that was modified. Lines or items
following a &quot;&gt;&quot; on the right side were added, those on the
left side followed by a &quot;&lt;&quot; were removed, and those with
a &quot;|&quot; between text on the left and right side were modified.</p>
<p>The automatic unit testing (see HACKING) contains a <cite>testItems</cite>
test which verifies the copying of special entries using the
same method.</p>
<p>Modifying one of the address books or even both at the same time and
then synchronizing back and forth can be used to verify that
SyncEvolution works as expected. If you do not trust SyncEvolution or
the server, then it is prudent to run these checks with a copy of the
original address book. Make a backup of the .evolution/addressbook
directory.</p>
</div>
<div class="section" id="item-changes-and-data-changes">
<h4>Item Changes and Data Changes</h4>
<p>SyncML clients and servers consider each entry in a database as one
item. Items can be added, removed or updated. This is the item change
information that client and server exchange during a normal,
incremental synchronization.</p>
<p>If an item is saved, removed locally, and reimported, then this is
usually reported to a peer as &quot;one item removed, one added&quot; because
the information available to SyncEvolution is not sufficient to
determine that this is in fact the same item. One exception are
iCalendar 2.0 items with their globally unique ID: the modification
above will be reported to the server as &quot;one item updated&quot;.</p>
<p>That is better, but still not quite correct because the content of the
item has not changed, only the meta information about it which is used
to detect changes. This cannot be avoided without creating additional
overhead for normal synchronizations.</p>
<p>SyncEvolution reports <em>item changes</em> (the number of added, removed and
updated items) as well as <em>data changes</em>. These data changes are
calculated by comparing database dumps using the <cite>synccompare</cite> tool.
Because this data comparison ignores information about which data
belongs to which item, it is able to detect that re-adding an item
that was removed earlier does not change the data, in contrast to the
item changes. On the other hand, removing one item and adding a
different one may look like updating just one item.</p>
</div>
<div class="section" id="automatic-backups-and-logging">
<h4>Automatic Backups and Logging</h4>
<p>To support recovery from a synchronization which damaged the
local data or modified it in an unexpected way, SyncEvolution
can create the following files during a synchronization:</p>
<ul class="simple">
<li>a dump of the data in a format which can be restored by
SyncEvolution, usually a single file per item containing
in a standard text format (VCARD/VCALENDAR)</li>
<li>a full log file with debug information</li>
<li>another dump of the data after the synchronization for
automatic comparison of the before/after state with
<cite>synccompare</cite></li>
</ul>
<p>If the server configuration option &quot;logdir&quot; is set, then
a new directory will be created for each synchronization
in that directory, using the format <cite>&lt;peer&gt;-&lt;yyyy&gt;-&lt;mm&gt;-&lt;dd&gt;-&lt;hh&gt;-&lt;mm&gt;[-&lt;seq&gt;]</cite>
with the various fields filled in with the time when the
synchronization started. The sequence suffix will only be
used when necessary to make the name unique. By default,
SyncEvolution will never delete any data in that log
directory unless explicitly asked to keep only a limited
number of previous log directories.</p>
<p>This is done by setting the &quot;maxlogdirs&quot; limit to something
different than the empty string and 0. If a limit is set,
then SyncEvolution will only keep that many log directories
and start removing the &quot;less interesting&quot; ones when it reaches
the limit. Less interesting are those where no data changed
and no error occurred.</p>
<p>To avoid writing any additional log file or database dumps during
a synchronization, the &quot;logdir&quot; can be set to &quot;none&quot;. To reduce
the verbosity of the log, set &quot;loglevel&quot;. If not set or 0, then
the verbosity is set to 3 = DEBUG when writing to a log file and
2 = INFO when writing to the console directly. To debug issues
involving data conversion, level 4 also dumps the content of
items into the log.</p>
</div>
</div>
<div class="section" id="environment">
<h3>ENVIRONMENT</h3>
<p>The following environment variables control where SyncEvolution finds
files and other aspects of its operations.</p>
<dl class="docutils">
<dt>http_proxy</dt>
<dd>Overrides the proxy settings temporarily. Setting it to an empty value
disables the normal proxy settings.</dd>
<dt>HOME/XDG_CACHE_HOME/XDG_CONFIG_HOME</dt>
<dd>SyncEvolution follows the <a class="reference external" href="http://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html">XDG</a> desktop standard for its files. By default,
<cite>$HOME/.config/syncevolution</cite> is the location for configuration files.
<cite>$HOME/.cache/syncevolution</cite> holds session directories with log files and
database dumps.</dd>
</dl>
<dl class="docutils">
<dt>SYNCEVOLUTION_DEBUG</dt>
<dd>Setting this to any value disables the filtering of stdout and stderr
that SyncEvolution employs to keep noise from system libraries out
of the command line output.</dd>
<dt>SYNCEVOLUTION_GNUTLS_DEBUG</dt>
<dd>Enables additional debugging output when using the libsoup HTTP transport library.</dd>
<dt>SYNCEVOLUTION_BACKEND_DIR</dt>
<dd>Overrides the default path to plugins, normally <cite>/usr/lib/syncevolution/backends</cite>.</dd>
<dt>SYNCEVOLUTION_TEMPLATE_DIR</dt>
<dd>Overrides the default path to template files, normally
<cite>/usr/share/syncevolution/templates</cite>.</dd>
<dt>SYNCEVOLUTION_XML_CONFIG_DIR</dt>
<dd><p class="first">Overrides the default path to the Synthesis XML configuration files, normally
<cite>/usr/share/syncevolution/xml</cite>. These files are merged into one configuration
each time the Synthesis SyncML engine is started as part of a sync session.</p>
<p class="last">Note that in addition to this directory, SyncEvolution also always
searches for configuration files inside <cite>$HOME/.config/syncevolution-xml</cite>.
Files with the same relative path and name as in <cite>/usr/share/syncevolution/xml</cite>
override those files, others extend the final configuration.</p>
</dd>
</dl>
</div>
<div class="section" id="bugs">
<h3>BUGS</h3>
<p>See <a class="reference external" href="http://syncevolution.org/documentation/known-issues">known issues</a> and the <a class="reference external" href="http://syncevolution.org/support">support</a> web page for more information.</p>
</div>
<div class="section" id="see-also">
<h3>SEE ALSO</h3>
<p><a class="reference external" href="http://syncevolution.org">http://syncevolution.org</a></p>
</div>
<div class="section" id="authors">
<h3>AUTHORS</h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Main developer:</th><td class="field-body">Patrick Ohly &lt;<a class="reference external" href="mailto:patrick.ohly&#64;intel.com">patrick.ohly&#64;intel.com</a>&gt;, <a class="reference external" href="http://www.estamos.de">http://www.estamos.de</a></td>
</tr>
<tr class="field"><th class="field-name">Contributors:</th><td class="field-body"><a class="reference external" href="http://syncevolution.org/about/contributors">http://syncevolution.org/about/contributors</a></td>
</tr>
<tr class="field"><th class="field-name" colspan="2">To contact the project publicly (preferred):</th></tr>
<tr><td>&nbsp;</td><td class="field-body"><a class="reference external" href="mailto:syncevolution&#64;syncevolution.org">syncevolution&#64;syncevolution.org</a></td>
</tr>
<tr class="field"><th class="field-name" colspan="2">Intel-internal team mailing list (confidential):</th></tr>
<tr><td>&nbsp;</td><td class="field-body"><a class="reference external" href="mailto:syncevolution&#64;lists.intel.com">syncevolution&#64;lists.intel.com</a></td>
</tr>
</tbody>
</table>
</div>
</div>
</body>
</html>
