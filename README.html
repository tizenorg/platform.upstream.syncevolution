<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.6: http://docutils.sourceforge.net/" />
<title>SyncEvolution</title>
<meta name="date" content="2012-01-13" />
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 5951 2009-05-18 18:03:10Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left{
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: left }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="syncevolution">
<h1 class="title">SyncEvolution</h1>
<h2 class="subtitle" id="synchronize-personal-information-management-data">synchronize personal information management data</h2>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr class="field"><th class="docinfo-name">Manual section:</th><td class="field-body">1</td>
</tr>
<tr><th class="docinfo-name">Version:</th>
<td>1.2.2</td></tr>
<tr><th class="docinfo-name">Date:</th>
<td>2012-01-13</td></tr>
</tbody>
</table>
<div class="section" id="synopsis">
<h3>SYNOPSIS</h3>
<dl class="docutils">
<dt>Show available sources:</dt>
<dd>syncevolution</dd>
<dt>Show information about configuration(s):</dt>
<dd>syncevolution --print-servers|--print-configs|--print-peers</dd>
<dt>Show information about a specific configuration:</dt>
<dd>syncevolution --print-config [--quiet] [--] &lt;config&gt; [main|&lt;source&gt; ...]</dd>
<dt>List sessions:</dt>
<dd>syncevolution --print-sessions [--quiet] [--] &lt;config&gt;</dd>
<dt>Show information about SyncEvolution:</dt>
<dd>syncevolution --help|-h|--version</dd>
<dt>Run a synchronization as configured:</dt>
<dd>syncevolution &lt;config&gt; [&lt;source&gt; ...]</dd>
<dt>Run a synchronization with properties changed just for this run:</dt>
<dd>syncevolution --run &lt;options for run&gt; [--] &lt;config&gt; [&lt;source&gt; ...]</dd>
<dt>Restore data from the automatic backups:</dt>
<dd>syncevolution --restore &lt;session directory&gt; --before|--after [--dry-run] [--] &lt;config&gt; &lt;source&gt; ...</dd>
<dt>Create, update or remove a configuration:</dt>
<dd><p class="first">syncevolution --configure &lt;options&gt; [--] &lt;config&gt; [&lt;source&gt; ...]</p>
<p class="last">syncevolution --remove|--migrate &lt;options&gt; [--] &lt;config&gt;</p>
</dd>
<dt>List items:</dt>
<dd>syncevolution --print-items [--] &lt;config&gt; &lt;source&gt;</dd>
<dt>Export item(s):</dt>
<dd>syncevolution [--delimiter &lt;string&gt;] --export &lt;dir&gt;|&lt;file&gt;|- [--] &lt;config&gt; &lt;source&gt; [&lt;luid&gt; ...]</dd>
<dt>Add item(s):</dt>
<dd>syncevolution [--delimiter &lt;string&gt;|none] --import &lt;dir&gt;|&lt;file&gt;|- [--] &lt;config&gt; &lt;source&gt;</dd>
<dt>Update item(s):</dt>
<dd><p class="first">syncevolution --update &lt;dir&gt; [--] &lt;config&gt; &lt;source&gt;</p>
<p class="last">syncevolution [--delimiter &lt;string&gt;|none] --update &lt;file&gt;|- [--] &lt;config&gt; &lt;source&gt; &lt;luid&gt; ...</p>
</dd>
<dt>Remove item(s):</dt>
<dd>syncevolution --delete-items [--] &lt;config&gt; &lt;source&gt; (&lt;luid&gt; ... | '*')</dd>
</dl>
</div>
<div class="section" id="description">
<h3>DESCRIPTION</h3>
<p>This text explains the usage of the SyncEvolution command line.</p>
<p>SyncEvolution synchronizes personal information management (PIM) data
such as contacts, appointments, tasks and memos using the Synthesis
sync engine, which provides support for the SyncML synchronization
protocol.</p>
<p>SyncEvolution synchronizes with SyncML servers over HTTP and with
SyncML capable phones locally over Bluetooth (new in 1.0). Plugins
provide access to the data which is to be synchronized. Binaries are
available for Linux desktops (synchronizing data in GNOME Evolution,
with KDE supported indirectly already and Akonadi support in
development), for MeeGo (formerly Moblin) and for Maemo 5/Nokia
N900. The source code can be compiled for Unix-like systems and
provides a framework to build custom SyncML clients or servers.</p>
</div>
<div class="section" id="terminology">
<h3>TERMINOLOGY</h3>
<dl class="docutils">
<dt>peer</dt>
<dd>A peer is the entity that data is synchronized with. This can be
another device (like a phone), a server (like Google) or
even the host itself (useful for synchronizing two different
databases).</dd>
<dt>host</dt>
<dd>The device or computer that SyncEvolution runs on.</dd>
<dt>database</dt>
<dd>Each peer has one or more databases that get synchronized (Google Calendar,
Google Contacts). Conceptually a database is a set of items where each
item is independent of the others.</dd>
<dt>data source</dt>
<dd>A name for something that provides access to data. Primarily used for
the configuration which combines backend and database settings, sometimes
also instead of these two terms.</dd>
<dt>local/remote</dt>
<dd>Synchronization always happens between a pair of databases and thus
has two sides. One database or side of a sync is remote (the one
of the peer) or local (SyncEvolution). For the sake of consistency (and
lack of better terms), these terms are used even if the peer is another
instance of SyncEvolution and/or all data resides on the same storage.</dd>
<dt>sync config</dt>
<dd><p class="first">A sync configuration defines how to access a peer: the protocol
which is to be used, how to find the peer, credentials, etc. Peers
might support more than one protocol, in which case multiple
sync configs have to be created.</p>
<p class="last">Sync configs can be used to initiate a sync (like contacting a
SyncML server) or to handle an incoming sync request (when acting
as SyncML server which is contacted by the peer).</p>
</dd>
<dt>source config</dt>
<dd><p class="first">Each data source corresponds to a local database. A source config
defines how to access that database, like a sync config does for
peers. This information about a local database is independent
of the peers that the database might be synchronized with.</p>
<p>Sync configs use these shared source configs and add additional,
per-peer settings to each of them that define how that local
database maps to a remote database in the peer. By default a source
config is inactive inside a sync config and thus ignored. It must be
activated by setting the unshared <cite>sync</cite> property to something other
than <cite>none</cite> (aka <cite>disabled</cite>).</p>
<p>In SyncEvolution's predefined configuration templates, the following
names for sources are used. Different names can be chosen for sources
that are defined manually.</p>
<ul class="last simple">
<li>addressbook: a list of contacts</li>
<li>calendar: calendar <em>events</em></li>
<li>memo: plain text notes</li>
<li>todo: task list</li>
<li>calendar+todo: a virtual source combining one local &quot;calendar&quot; and
one &quot;todo&quot; source (required for synchronizing with some phones)</li>
</ul>
</dd>
<dt>backend</dt>
<dd>Access to databases is provided by SyncEvolution backends. It does
not matter where that data is stored. Some backends provide access
to data outside of the host itself (<a class="reference internal" href="#caldav-and-carddav">CalDAV and CardDAV</a>, ActiveSync).</dd>
<dt>configuration property</dt>
<dd><p class="first">Sync and source configs contain configuration properties. Each
property is a name/value pair. Sync properties are used in sync configs,
source properties in source configs. The names were chosen so that
they are unique, i.e., no sync property has the same name as a source
property.</p>
<p class="last">A property can be <em>unshared</em> (has separate values for each peer, therefore
sometimes also called <em>per-peer</em>; for example the <cite>uri</cite> property which
defines the remote database), <em>shared</em> (same value for all peers; for
example the <cite>database</cite> property for selecting the local database) or
<em>global</em> (exactly one value).</p>
</dd>
<dt>context</dt>
<dd>Sync and source configs are defined inside a configuration context.
Typically each context represents a certain set of sources. The values
of shared properties are only shared inside their context. That way
it is possible to define a second <cite>work</cite> context with a <cite>work calendar</cite>
source using one database and use the implicit <cite>default</cite> context for
a private <cite>calendar</cite> source with a different database.</dd>
<dt>context config</dt>
<dd>The shared and global properties of a certain context.</dd>
<dt>configuration template</dt>
<dd><p class="first">Templates define the settings for specific peers. Some templates
are packaged together with SyncEvolution, others may be added by
packagers or users. Settings from templates are copied once into
the sync config when creating it. There is no permanent link back
to the template, so updating a template has no effect on configs
created from it earlier.</p>
<p class="last">A template only contains unshared properties. Therefore it is
possible to first set shared properties (for example, choosing
which databases to synchronize in the default context), then
add sync configs for different peers to that context without
reseting the existing settings.</p>
</dd>
<dt>local sync</dt>
<dd><p class="first">Traditionally, a sync config specifies SyncML as the synchronization
protocol. The peer must support SyncML for this to work. When the
peer acts as SyncML server, conflict resolution happens on the
peer, outside of the control of SyncEvolution.</p>
<p class="last">In a so called <a class="reference internal" href="#local-sync">local sync</a>, SyncEvolution connects two of its own
backends and runs all of the synchronization logic itself on the host.</p>
</dd>
<dt>target config</dt>
<dd>In addition to the normal sync config, a local sync also uses a target
config. This target config is a special kind of sync config. It defines
sync properties that are necessary to access databases on the other
side of the local sync. Sync configs can have arbitrary names while
a target config must be named <cite>target-config</cite>.</dd>
</dl>
</div>
<div class="section" id="command-line-conventions">
<h3>COMMAND LINE CONVENTIONS</h3>
<p>The <tt class="docutils literal">&lt;config&gt;</tt> and the <tt class="docutils literal">&lt;source&gt;</tt> strings in the command line synopsis are
used to find the sync resp. source configs. Depending on which
other parameters are given, different operations are executed.</p>
<p>A config name has the format <tt class="docutils literal"><span class="pre">[&lt;peer&gt;][&#64;&lt;context&gt;]</span></tt>. When the context
is not specified explicitly, SyncEvolution first searches for an
existing configuration with the given name. If not found, it uses the
<tt class="docutils literal">&#64;default</tt> context as fallback. Thus the empty config name is an alias
for <tt class="docutils literal">&#64;default</tt>.</p>
<p>The <tt class="docutils literal">&lt;peer&gt;</tt> part identifies a specific sync or target config inside
the context. It is optional and does not have to be specified when not
needed, for example when configuring the shared settings of sources
(<tt class="docutils literal"><span class="pre">--configure</span> &#64;default addressbook</tt>) or accessing items inside a
source (<tt class="docutils literal"><span class="pre">--print-items</span> &#64;work calendar</tt>).</p>
<p>Listing sources on the command line limits the operation to those
sources (called <em>active sources</em> below). If not given, all sources
defined for the config are active. Some operations require
the name of exactly one source.</p>
<p>Properties are set with key/value assignments and/or the
<tt class="docutils literal"><span class="pre">--sync/source-property</span></tt> keywords. Those keywords are only needed for
the hypothetical situation that a sync and source property share the
same name (not normally the case). Without them, SyncEvolution
automatically identifies which kind of property is meant based on the
name.</p>
<p>A <tt class="docutils literal">&lt;property&gt;</tt> assignment has the following format:</p>
<pre class="literal-block">
[&lt;source&gt;/]&lt;name&gt;[&#64;&lt;context&gt;|&#64;&lt;peer&gt;&#64;&lt;context&gt;]=&lt;value&gt;
</pre>
<p>The optional <tt class="docutils literal">&lt;context&gt;</tt> or <tt class="docutils literal"><span class="pre">&lt;peer&gt;&#64;&lt;context&gt;</span></tt> suffix limits the scope
of the value to that particular configuration. This is useful when
running a local sync, which involves a sync and a target
configuration. For example, the log level can be specified separately
for both sides:</p>
<pre class="literal-block">
--run loglevel&#64;default=1 loglevel&#64;google-calendar=4 google-calendar&#64;default
</pre>
<p>A string without a second &#64; sign inside is always interpreted as a
context name, so in contrast to the <tt class="docutils literal">&lt;config&gt;</tt> string, <tt class="docutils literal">foo</tt> cannot be
used to reference the <tt class="docutils literal">foo&#64;default</tt> configuration. Use the full name
including the context for that.</p>
<p>When no config or context is specified explicitly, a value is
changed in all active configs, typically the one given with
<tt class="docutils literal">&lt;config&gt;</tt>.  The priority of multiple values for the same config
is <cite>more specific definition wins</cite>, so <tt class="docutils literal"><span class="pre">&lt;peer&gt;&#64;&lt;context&gt;</span></tt>
overrides <tt class="docutils literal">&#64;&lt;context&gt;</tt>, which overrides <cite>no suffix given</cite>.
Specifying some suffix which does not apply to the current operation
does not trigger an error, so beware of typos.</p>
<p>Source properties can be specified with a <tt class="docutils literal">&lt;source&gt;/</tt> prefix. This
allows limiting the value to the selected source. For example:</p>
<pre class="literal-block">
--configure &quot;addressbook/database=My Addressbook&quot; \
            &quot;calendar/database=My Calendar&quot; \
            &#64;default addressbook calendar
</pre>
<p>Another way to achieve the same effect is to run the <tt class="docutils literal"><span class="pre">--configure</span></tt>
operation twice, once for <tt class="docutils literal">addressbook</tt> and once for <tt class="docutils literal">calendar</tt>:</p>
<pre class="literal-block">
--configure &quot;database=My Addressbook&quot; &#64;default addressbook
--configure &quot;calendar/database=My Calendar&quot; &#64;default calendar
</pre>
<p>If the same property is set both with and without a <tt class="docutils literal">&lt;source&gt;/</tt> prefix,
then the more specific value with that prefix is used for that source,
regardless of the order on the command line. The following command
enables all sources except for the addressbook:</p>
<pre class="literal-block">
--configure --source-property addressbook/sync=none \
            --source-property sync=two-way \
            &lt;sync config&gt;
</pre>
</div>
<div class="section" id="usage">
<h3>USAGE</h3>
<pre class="literal-block">
syncevolution
</pre>
<p>If no arguments are given, then SyncEvolution will list all available
data sources regardless whether there is a configuration file for them
or not. The output includes the identifiers which can then be used to
select those sources in a configuration file. For each source one can
set a different synchronization mode in its configuration file.</p>
<pre class="literal-block">
syncevolution &lt;config&gt;
</pre>
<p>Without the optional list of sources, all sources which are enabled in
their configuration file are synchronized.</p>
<pre class="literal-block">
syncevolution &lt;config&gt; &lt;source&gt; ...
</pre>
<p>Otherwise only the ones mentioned on the command line are active. It
is possible to configure sources without activating their
synchronization: if the synchronization mode of a source is set to
<cite>disabled</cite>, the source will be ignored. Explicitly listing such a
source will synchronize it in <cite>two-way</cite> mode once.</p>
<p>Progress and error messages are written into a log file that is
preserved for each synchronization run. Details about that is found in
the <cite>Automatic Backups and Logging</cite> section below. All errors and
warnings are printed directly to the console in addition to writing
them into the log file. Before quitting SyncEvolution will print a
summary of how the local data was modified.  This is done with the
<cite>synccompare</cite> utility script described in the <a class="reference internal" href="#exchanging-data">Exchanging Data</a>
section.</p>
<p>When the <tt class="docutils literal">logdir</tt> property is enabled (since v0.9 done by default for
new configurations), then the same comparison is also done before the
synchronization starts.</p>
<p>In case of a severe error the synchronization run is aborted
prematurely and SyncEvolution will return a non-zero value. Recovery
from failed synchronization is done by forcing a full synchronization
during the next run, i.e. by sending all items and letting the SyncML
server compare against the ones it already knows. This is avoided
whenever possible because matching items during a slow synchronization
can lead to duplicate entries.</p>
<p>After a successful synchronization the server's configuration file is
updated so that the next run can be done incrementally.  If the
configuration file has to be recreated e.g. because it was lost, the
next run recovers from that by doing a full synchronization. The risk
associated with this is that the server might not recognize items that
it already has stored previously which then would lead to duplication
of items.</p>
<pre class="literal-block">
syncevolution --configure &lt;options for configuration&gt; &lt;config&gt; [&lt;source&gt; ...]
</pre>
<p>Options in the configuration can be modified via the command
line. Source properties are changed for all sources unless sources are
listed explicitly.  Some source properties have to be different for
each source, in which case syncevolution must be called multiple times
with one source listed in each invocation.</p>
<pre class="literal-block">
syncevolution --remove &lt;config&gt;
</pre>
<p>Deletes the configuration. If the &lt;config&gt; refers to a specific
peer, only that peer's configuration is removed. If it refers to
a context, that context and all peers inside it are removed.</p>
<p>Note that there is no confirmation question. Neither local data
referenced by the configuration nor the content of log dirs are
deleted.</p>
<pre class="literal-block">
syncevolution --run &lt;options for run&gt; &lt;config&gt; [&lt;source&gt; ...]
</pre>
<p>Options can also be overridden for just the current run, without
changing the configuration. In order to prevent accidentally running a
sync session when a configuration change was intended, either
--configure or --run must be given explicitly if options are specified
on the command line.</p>
<pre class="literal-block">
syncevolution --status &lt;config&gt; [&lt;source&gt; ...]
</pre>
<p>Prints what changes were made locally since the last synchronization.
Depends on access to database dumps from the last run, so enabling the
<tt class="docutils literal">logdir</tt> property is recommended.</p>
<pre class="literal-block">
syncevolution --print-servers|--print-configs|--print-peers
syncevolution --print-config [--quiet] &lt;config&gt; [main|&lt;source&gt; ...]
syncevolution --print-sessions [--quiet] &lt;config&gt;
</pre>
<p>These commands print information about existing configurations. When
printing a configuration a short version without comments can be
selected with --quiet. When sources are listed, only their
configuration is shown. <cite>Main</cite> instead or in combination with sources
lists only the main peer configuration.</p>
<pre class="literal-block">
syncevolution --restore &lt;session directory&gt; --before|--after
              [--dry-run] &lt;config&gt; &lt;source&gt; ...
</pre>
<p>This restores local data from the backups made before or after a
synchronization session. The --print-sessions command can be used to
find these backups. The source(s) have to be listed explicitly. There
is intentionally no default, because as with --remove there is no
confirmation question. With --dry-run, the restore is only simulated.</p>
<p>The session directory has to be specified explicitly with its path
name (absolute or relative to current directory). It does not have to
be one of the currently active log directories, as long as it contains
the right database dumps for the selected sources.</p>
<p>A restore tries to minimize the number of item changes (see section
<a class="reference internal" href="#item-changes-and-data-changes">Item Changes and Data Changes</a>). This means that items that are
identical before and after the change will not be transmitted anew to
the server during the next synchronization. If the server somehow
needs to get a clean copy of all items on the client then, use &quot;--sync
refresh-from-client&quot; in the next run.</p>
<pre class="literal-block">
syncevolution --print-items &lt;config&gt; &lt;source&gt;
syncevolution [--delimiter &lt;string&gt;] --export &lt;dir&gt;|&lt;file&gt;|- &lt;config&gt; &lt;source&gt; [&lt;luid&gt; ...]
syncevolution [--delimiter &lt;string&gt;|none] --import &lt;dir&gt;|&lt;file&gt;|- &lt;config&gt; &lt;source&gt;
syncevolution --update &lt;dir&gt; &lt;config&gt; &lt;source&gt;
syncevolution [--delimiter &lt;string&gt;|none] --update &lt;file&gt;|- &lt;config&gt; &lt;source&gt; &lt;luid&gt; ...
syncevolution --delete-items &lt;config&gt; &lt;source&gt; (&lt;luid&gt; ... | *)
</pre>
<p>Restore depends on the specific format of the automatic backups
created by SyncEvolution. Arbitrary access to item data is provided
with additional options. &lt;luid&gt; here is the unique local identifier
assigned to each item in the source, transformed so that it contains
only alphanumeric characters, dash and underscore. A star * in
--delete-items selects all items for deletion.</p>
<p>&lt;config&gt; and &lt;source&gt; must be given, but they do not have to refer to
existing configurations. In that case, the desired backend and must be
give via the <tt class="docutils literal">backend</tt> property, like this:</p>
<pre class="literal-block">
syncevolution --print-items backend=evolution-contacts dummy-config dummy-source
</pre>
<p>The desired backend database can be chosen via <tt class="docutils literal"><span class="pre">database=&lt;identifier&gt;</span></tt>.</p>
</div>
<div class="section" id="options">
<h3>OPTIONS</h3>
<p>Here is a full description of all &lt;options&gt; that can be put in front
of the server name. Whenever an option accepts multiple values, a
question mark can be used to get the corresponding help text and/or
a list of valid values.</p>
<dl class="docutils">
<dt>--sync|-s &lt;mode&gt;|?</dt>
<dd><p class="first">Temporarily synchronize the active sources in that mode. Useful
for a <cite>refresh-from-server</cite> or <cite>refresh-from-client</cite> sync which
clears all data at one end and copies all items from the other.</p>
<p class="last"><strong>Warning:</strong> in local sync (<a class="reference internal" href="#caldav-and-carddav">CalDAV and CardDAV</a>/ActiveSync, ...) and
direct sync with a phone, the sync is started by the side which acts
as server. Therefore the <tt class="docutils literal"><span class="pre">from-server</span></tt> variants
(<tt class="docutils literal"><span class="pre">one-way-from-server</span></tt>, <tt class="docutils literal"><span class="pre">refresh-from-server</span></tt>) transfer data
from the sync config into the target config (see &quot;Synchronization
beyond SyncML&quot; below) resp. to a phone. The <tt class="docutils literal"><span class="pre">from-client</span></tt> variants
transfer in the other direction, even if the target config happens
to access data on a remote server.</p>
</dd>
<dt>--print-servers|--print-configs|--print-peers</dt>
<dd>Prints the names of all configured peers to stdout. There is no
difference between these options, the are just aliases.</dd>
<dt>--print-servers|--print-configs|--print-peers|-p</dt>
<dd>Prints the complete configuration for the selected &lt;config&gt;
to stdout, including up-to-date comments for all properties. The
format is the normal .ini format with source configurations in
different sections introduced with [&lt;source&gt;] lines. Can be combined
with --sync-property and --source-property to modify the configuration
on-the-fly. When one or more sources are listed after the &lt;config&gt;
name on the command line, then only the configs of those sources are
printed. <cite>main</cite> selects the main configuration instead of source
configurations. Using --quiet suppresses the comments for each property.
When setting a --template, then the reference configuration for
that peer is printed instead of an existing configuration.</dd>
<dt>--print-sessions</dt>
<dd>Prints information about previous synchronization sessions for the
selected peer or context are printed. This depends on the <tt class="docutils literal">logdir</tt>
property.  The information includes the log directory name (useful for
--restore) and the synchronization report. In combination with
--quiet, only the paths are listed.</dd>
<dt>--configure|-c</dt>
<dd><p class="first">Modify the configuration files for the selected peer and/or sources.</p>
<p>If no such configuration exists, then a new one is created using one
of the template configurations (see --template option). Choosing a
template sets most of the relevant properties for the peer and the
default set of sources (see above for a list of those). Anything
specific to the user (like username/password) still has to be set
manually.</p>
<p>When creating a new configuration and listing sources explicitly on the
command line, only those sources will be set to active in the new
configuration, i.e. <cite>syncevolution -c memotoo addressbook</cite>
followed by <cite>syncevolution memotoo</cite> will only synchronize the
address book. The other sources are created in a disabled state.
When modifying an existing configuration and sources are specified,
then the source properties of only those sources are modified.</p>
<p>By default, creating a config requires a template. Source names on the
command line must match those in the template. This allows catching
typos in the peer and source names. But it also prevents some advanced
use cases. Therefore it is possible to disable these checks in two ways:</p>
<pre class="last literal-block">
- use `--template none` or
- specify all required sync and source properties that are normally
  in the templates on the command line (syncURL, backend, ...)
</pre>
</dd>
<dt>--run|-r</dt>
<dd>To prevent accidental sync runs when a configuration change was
intended, but the <cite>--configure</cite> option was not used, <cite>--run</cite> must be
specified explicitly when sync or source properties are selected
on the command line and they are meant to be used during a sync
session triggered by the invocation.</dd>
<dt>--migrate</dt>
<dd><p class="first">In older SyncEvolution releases a different layout of configuration files
was used. Using --migrate will automatically migrate to the new
layout and rename the &lt;config&gt; into &lt;config&gt;.old to prevent accidental use
of the old configuration. WARNING: old SyncEvolution releases cannot
use the new configuration!</p>
<p>The switch can also be used to migrate a configuration in the current
configuration directory: this preserves all property values, discards
obsolete properties and sets all comments exactly as if the configuration
had been created from scratch. WARNING: custom comments in the
configuration are not preserved.</p>
<p class="last">--migrate implies --configure and can be combined with modifying
properties.</p>
</dd>
<dt>--print-items</dt>
<dd>Shows all existing items using one line per item using
the format &quot;&lt;luid&gt;[: &lt;short description&gt;]&quot;. Whether the description
is available depends on the backend and the kind of data that it
stores.</dd>
<dt>--export</dt>
<dd><p class="first">Writes all items in the source or all items whose &lt;luid&gt; is
given into a directory if the --export parameter exists and is a
directory. The &lt;luid&gt; of each item is used as file name. Otherwise it
creates a new file under that name and writes the selected items
separated by the chosen delimiter string. stdout can be selected with
a dash.</p>
<p>The default delimiter (two line breaks) matches a blank line. As a special
case, it also matches a blank line with DOS line ending (line break,
carriage return, line break). This works for vCard 3.0 and iCalendar 2.0,
which never contain blank lines.</p>
<p class="last">When exporting, the default delimiter will always insert two line
breaks regardless whether the items contain DOS line ends. As a
special case, the initial newline of a delimiter is skipped if the
item already ends in a newline.</p>
</dd>
<dt>--import</dt>
<dd>Adds all items found in the directory or input file to the
source.  When reading from a directory, each file is treated as one
item. Otherwise the input is split at the chosen delimiter. &quot;none&quot; as
delimiter disables splitting of the input.</dd>
<dt>--update</dt>
<dd>Overwrites the content of existing items. When updating from a
directory, the name of each file is taken as its luid. When updating
from file or stdin, the number of luids given on the command line
must match with the number of items in the input.</dd>
<dt>--delete-items</dt>
<dd>Removes the specified items from the source. Most backends print
some progress information about this, but besides that, no further
output is produced. Trying to remove an item which does not exist
typically leads to an ERROR message, but is not reflected in a
non-zero result of the command line invocation itself because the
situation is not reported as an error by backends (removal of
non-existent items is not an error in SyncML). Use a star * instead
or in addition to listing individual luids to delete all items.</dd>
<dt>--sync-property|-y &lt;property&gt;=&lt;value&gt;|&lt;property&gt;=?|?</dt>
<dd>Overrides a source-independent configuration property for the
current synchronization run or permanently when --configure is used
to update the configuration. Can be used multiple times.  Specifying
an unused property will trigger an error message.</dd>
<dt>--source-property|-z &lt;property&gt;=&lt;value&gt;|&lt;property&gt;=?|?</dt>
<dd>Same as --sync-property, but applies to the configuration of all active
sources. <cite>--sync &lt;mode&gt;</cite> is a shortcut for <cite>--source-property sync=&lt;mode&gt;</cite>.</dd>
<dt>--template|-l &lt;peer name&gt;|default|?&lt;device&gt;</dt>
<dd><p class="first">Can be used to select from one of the built-in default configurations
for known SyncML peers. Defaults to the &lt;config&gt; name, so --template
only has to be specified when creating multiple different configurations
for the same peer, or when using a template that is named differently
than the peer. <cite>default</cite> is an alias for <cite>memotoo</cite> and can be
used as the starting point for servers which do not have a built-in
template.</p>
<p>A pseudo-random device ID is generated automatically. Therefore setting
the <cite>deviceId</cite> sync property is only necessary when manually recreating a
configuration or when a more descriptive name is desired.</p>
<p class="last">The available templates for different known SyncML servers are listed when
using a single question mark instead of template name. When using the
<cite>?&lt;device&gt;</cite> format, a fuzzy search for a template that might be
suitable for talking to such a device is done. The matching works best
when using <cite>&lt;device&gt; = &lt;Manufacturer&gt; &lt;Model&gt;</cite>. If you don't know the
manufacturer, you can just keep it as empty. The output in this mode
gives the template name followed by a short description and a rating how well
the template matches the device (100% is best).</p>
</dd>
<dt>--status|-t</dt>
<dd>The changes made to local data since the last synchronization are
shown without starting a new one. This can be used to see in advance
whether the local data needs to be synchronized with the server.</dd>
<dt>--quiet|-q</dt>
<dd>Suppresses most of the normal output during a synchronization. The
log file still contains all the information.</dd>
<dt>--keyring|-k</dt>
<dd><p class="first">Save or retrieve passwords from the GNOME keyring when modifying the
configuration or running a synchronization. Note that using this option
applies to <em>all</em> passwords in a configuration, so setting a single
password as follows moves the other passwords into the keyring, if
they were not stored there already:</p>
<pre class="literal-block">
--keyring --configure --sync-property proxyPassword=foo
</pre>
<p>When passwords were stored in the keyring, their value is set to a single
hyphen (&quot;-&quot;) in the configuration. This means that when running a
synchronization without the --keyring argument, the password has to be
entered interactively. The --print-config output always shows &quot;-&quot; instead
of retrieving the password from the keyring.</p>
<p class="last">The SyncEvolution daemon always uses the GNOME keyring, regardless of
the --keyring command line parameter. Therefore --keyring only has an
effect in combination with --daemon=no, or when SyncEvolution was compiled
without daemon support (not the default).</p>
</dd>
<dt>--daemon[=yes/no]</dt>
<dd>By default, the SyncEvolution command line is executed inside the
syncevo-dbus-server process. This ensures that synchronization sessions
started by the command line do not conflict with sessions started
via some other means (GUI, automatically). For debugging purposes
or very special use cases (running a local sync against a server which
executes inside the daemon) it is possible to execute the operation
without the daemon (--daemon=no).</dd>
<dt>--help|-h</dt>
<dd>Prints usage information.</dd>
<dt>--version</dt>
<dd>Prints the SyncEvolution version.</dd>
</dl>
</div>
<div class="section" id="configuration-properties">
<h3>CONFIGURATION PROPERTIES</h3>
<p>This section lists predefined properties. Backends can add their own
properties at runtime if none of the predefined properties are
suitable for a certain setting. Those additional properties are not
listed here. Use <tt class="docutils literal"><span class="pre">--sync/source-property</span> ?</tt> to get an up-to-date
list.</p>
<p>The predefined properties may also be interpreted slightly differently
by each backend and sync protocol. Sometimes this is documented in the
comment for each property, sometimes in the documentation of the
backend or sync protocol.</p>
<p>Properties are listed together with all recognized aliases (in those
cases where a property was renamed at some point), its default value,
sharing state (unshared/shared/global). Some properties must be
defined, which is marked with the word <cite>required</cite>.</p>
<div class="section" id="sync-properties">
<h4>Sync properties</h4>
<dl class="docutils">
<dt>syncURL (no default, unshared, required)</dt>
<dd><p class="first">Identifies how to contact the peer,
best explained with some examples.</p>
<p>HTTP(S) SyncML servers:</p>
<pre class="literal-block">
http://my.funambol.com/sync
http://sync.scheduleworld.com/funambol/ds
https://m.google.com/syncml
</pre>
<p>OBEX over Bluetooth uses the MAC address, with
the channel chosen automatically:</p>
<pre class="literal-block">
obex-bt://00:0A:94:03:F3:7E
</pre>
<p>If the automatism fails, the channel can also be specified:</p>
<pre class="literal-block">
obex-bt://00:0A:94:03:F3:7E+16
</pre>
<p>For peers contacting us via Bluetooth, the MAC address is
used to identify it before the sync starts. Multiple
urls can be specified in one syncURL property:</p>
<pre class="literal-block">
obex-bt://00:0A:94:03:F3:7E obex-bt://00:01:02:03:04:05
</pre>
<p class="last">In the future this might be used to contact the peer
via one of several transports; right now, only the first
one is tried.</p>
</dd>
<dt>username (no default, unshared)</dt>
<dd>user name used for authorization with the SyncML server</dd>
<dt>password (no default, unshared)</dt>
<dd><p class="first">password used for authorization with the peer;
in addition to specifying it directly as plain text, it can
also be read from the standard input or from an environment
variable of your choice:</p>
<pre class="last literal-block">
plain text  : password = &lt;insert your password here&gt;
ask         : password = -
env variable: password = ${&lt;name of environment variable&gt;}
</pre>
</dd>
<dt>logdir (no default, shared)</dt>
<dd>full path to directory where automatic backups and logs
are stored for all synchronizations; if unset, then
&quot;${XDG_CACHE_HOME}/syncevolution/&lt;server&gt;&quot; (which
usually expands to ${HOME}/.cache/...) will be used;
if &quot;none&quot;, then no backups of the databases are made and any
output is printed directly to the screen</dd>
<dt>loglevel (0, unshared)</dt>
<dd>level of detail for log messages:
- 0 (or unset) = INFO messages without log file, DEBUG with log file
- 1 = only ERROR messages
- 2 = also INFO messages
- 3 = also DEBUG messages
&gt; 3 = increasing amounts of debug messages for developers</dd>
<dt>printChanges (TRUE, unshared)</dt>
<dd>enables or disables the detailed (and sometimes slow) comparison
of database content before and after a sync session</dd>
<dt>dumpData (TRUE, unshared)</dt>
<dd>enables or disables the automatic backup of database content
before and after a sync session (always enabled if printChanges is enabled)</dd>
<dt>maxlogdirs (10, shared)</dt>
<dd>Unless this option is set, SyncEvolution will never delete
anything in the &quot;logdir&quot;. If set, the oldest directories and
all their content will be removed after a successful sync
to prevent the number of log directories from growing beyond
the given limit.</dd>
<dt>autoSync (0, unshared)</dt>
<dd><p class="first">Controls automatic synchronization. Currently,
automatic synchronization is done by running
a synchronization at regular intervals. This
may drain the battery, in particular when
using Bluetooth!
Because a peer might be reachable via different
transports at some point, this option provides
detailed control over which transports may
be used for automatic synchronization:</p>
<dl class="last docutils">
<dt>0</dt>
<dd>don't do auto sync</dd>
<dt>1</dt>
<dd><dl class="first last docutils">
<dt>do automatic sync, using whatever transport</dt>
<dd>is available</dd>
</dl>
</dd>
<dt>http</dt>
<dd>only via HTTP transport</dd>
<dt>obex-bt</dt>
<dd>only via Bluetooth transport</dd>
<dt>http,obex-bt</dt>
<dd>pick one of these</dd>
</dl>
</dd>
<dt>autoSyncInterval (30M, unshared)</dt>
<dd><p class="first">This is the minimum number of seconds between two
synchronizations that has to pass before starting
an automatic synchronization. Can be specified using
a 1h30m5s format.</p>
<p class="last">Before reducing this interval, consider that it will
increase resource consumption on the local and remote
side. Some SyncML server operators only allow a
certain number of sessions per day.
The value 0 has the effect of only running automatic
synchronization when changes are detected (not
implemented yet, therefore it basically disables
automatic synchronization).</p>
</dd>
<dt>autoSyncDelay (5M, unshared)</dt>
<dd><p class="first">An automatic sync will not be started unless the peer
has been available for this duration, specified in seconds
or 1h30m5s format.</p>
<p class="last">This prevents running a sync when network connectivity
is unreliable or was recently established for some
other purpose. It is also a heuristic that attempts
to predict how long connectivity be available in the
future, because it should better be available long
enough to complete the synchronization.</p>
</dd>
<dt>preventSlowSync (TRUE, unshared)</dt>
<dd><p class="first">During a slow sync, the SyncML server must match all items
of the client with its own items and detect which ones it
already has based on properties of the items. This is slow
(client must send all its data) and can lead to duplicates
(when the server fails to match correctly).
It is therefore sometimes desirable to wipe out data on one
side with a refresh-from-client/server sync instead of doing
a slow sync.
When this option is enabled, slow syncs that could cause problems
are not allowed to proceed. Instead, the affected sources are
skipped, allowing the user to choose a suitable sync mode in
the next run (slow sync selected explicitly, refresh sync).
The following situations are handled:</p>
<ul class="last simple">
<li>running as client with no local data =&gt; unproblematic,
slow sync is allowed to proceed automatically</li>
<li>running as client with local data =&gt; client has no
information about server, so slow sync might be problematic
and is prevented</li>
<li>client has data, server asks for slow sync because all its data
was deleted (done by Memotoo and Mobical, because they treat
this as 'user wants to start from scratch') =&gt; the sync would
recreate all the client's data, even if the user really wanted
to have it deleted, therefore slow sync is prevented</li>
</ul>
</dd>
<dt>useProxy (FALSE, unshared)</dt>
<dd>set to T to choose an HTTP proxy explicitly; otherwise the default
proxy settings of the underlying HTTP transport mechanism are used;
only relevant when contacting the peer via HTTP</dd>
<dt>proxyHost (no default, unshared)</dt>
<dd>proxy URL (<tt class="docutils literal"><span class="pre">http://&lt;host&gt;:&lt;port&gt;</span></tt>)</dd>
<dt>proxyUsername (no default, unshared)</dt>
<dd>authentication for proxy: username</dd>
<dt>proxyPassword (no default, unshared)</dt>
<dd>proxy password, can be specified in different ways,
see SyncML server password for details</dd>
<dt>clientAuthType (md5, unshared)</dt>
<dd><ul class="first simple">
<li>empty or &quot;md5&quot; for secure method (recommended)</li>
<li>&quot;basic&quot; for insecure method</li>
</ul>
<p class="last">This setting is only for debugging purpose and only
has an effect during the initial sync of a client.
Later it remembers the method that was supported by
the server and uses that. When acting as server,
clients contacting us can use both basic and md5
authentication.</p>
</dd>
<dt>RetryDuration (5M, unshared)</dt>
<dd><p class="first">The total amount of time in seconds in which the SyncML
client tries to get a response from the server.
During this time, the client will resend messages
in regular intervals (RetryInterval) if no response
is received or the message could not be delivered due
to transport problems. When this time is exceeded
without a response, the synchronization aborts without
sending further messages to the server.</p>
<p class="last">When acting as server, this setting controls how long
a client is allowed to not send a message before the
synchronization is aborted.</p>
</dd>
<dt>RetryInterval (2M, unshared)</dt>
<dd><p class="first">The number of seconds between the start of SyncML message sending
and the start of the retransmission. If the interval has
already passed when a message send returns, the
message is resent immediately. Resending without
any delay will never succeed and therefore specifying 0
disables retries.</p>
<p>Servers cannot resend messages, so this setting has no
effect in that case.</p>
<p class="last">The WebDAV backend also resends messages after a temporary
network error. It uses exponential backoff to determine when
the server is available again. This setting is divided by 24
to obtain the initial delay (default: 2m =&gt; 5s), which is then
doubled for each retry.</p>
</dd>
<dt>remoteIdentifier (no default, unshared)</dt>
<dd>the identifier sent to the remote peer for a server initiated sync.
if not set, deviceId will be used instead</dd>
<dt>PeerIsClient (FALSE, unshared)</dt>
<dd>Indicates whether this configuration is about a
client peer or server peer.</dd>
<dt>SyncMLVersion (no default, unshared)</dt>
<dd><p class="first">On a client, the latest commonly supported SyncML version
is used when contacting a server. one of '1.0/1.1/1.2' can
be used to pick a specific version explicitly.</p>
<p class="last">On a server, this option controls what kind of Server Alerted
Notification is sent to the client to start a synchronization.
By default, first the format from 1.2 is tried, then in case
of failure, the older one from 1.1. 1.2/1.1 can be choosen
explictely which disables the automatism</p>
</dd>
<dt>PeerName (no default, unshared)</dt>
<dd>An arbitrary name for the peer referenced by this config.
Might be used by a GUI. The command line tool always uses the
the configuration name.</dd>
<dt>deviceId (no default, shared)</dt>
<dd>The SyncML server gets this string and will use it to keep track of
changes that still need to be synchronized with this particular
client; it must be set to something unique (like the pseudo-random
string created automatically for new configurations) among all clients
accessing the same server.
myFUNAMBOL also requires that the string starts with sc-pim-</dd>
<dt>remoteDeviceId (no default, unshared)</dt>
<dd><p class="first">SyncML ID of our peer, empty if unknown; must be set only when
the peer is a SyncML client contacting us via HTTP.
Clients contacting us via OBEX/Bluetooth can be identified
either via this remoteDeviceId property or by their MAC
address, if that was set in the syncURL property.</p>
<p class="last">If this property is empty and the peer synchronizes with
this configuration chosen by some other means, then its ID
is recorded here automatically and later used to verify that
the configuration is not accidentally used by a different
peer.</p>
</dd>
<dt>enableWBXML (TRUE, unshared)</dt>
<dd>use the more compact binary XML (WBXML) for messages between client and server;
not applicable when the peer is a SyncML client, because then the client
chooses the encoding</dd>
<dt>maxMsgSize (150000, unshared), maxObjSize (4000000, unshared)</dt>
<dd>The maximum size of each message can be set (maxMsgSize) and the
peer can be told to never sent items larger than a certain
threshold (maxObjSize). Presumably the peer has to truncate or
skip larger items. Sizes are specified as number of bytes.</dd>
<dt>enableCompression (FALSE, unshared)</dt>
<dd>enable compression of network traffic (not currently supported)</dd>
<dt>SSLServerCertificates (/etc/ssl/certs/ca-certificates.crt:/etc/pki/tls/certs/ca-bundle.crt:/usr/share/ssl/certs/ca-bundle.crt, unshared)</dt>
<dd><p class="first">A string specifying the location of the certificates
used to authenticate the server. When empty, the
system's default location will be searched.</p>
<p class="last">SSL support when acting as HTTP server is implemented
by the HTTP server frontend, not with these properties.</p>
</dd>
<dt>SSLVerifyServer (TRUE, unshared)</dt>
<dd>The client refuses to establish the connection unless
the server presents a valid certificate. Disabling this
option considerably reduces the security of SSL
(man-in-the-middle attacks become possible) and is not
recommended.</dd>
<dt>SSLVerifyHost (TRUE, unshared)</dt>
<dd>The client refuses to establish the connection unless the
server's certificate matches its host name. In cases where
the certificate still seems to be valid it might make sense
to disable this option and allow such connections.</dd>
<dt>WebURL (no default, unshared)</dt>
<dd>The URL of a web page with further information about the server.
Used only by the GUI.</dd>
<dt>IconURI (no default, unshared)</dt>
<dd>The URI of an icon representing the server graphically.
Should be a 48x48 pixmap or a SVG (preferred).
Used only by the GUI.</dd>
<dt>ConsumerReady (FALSE, unshared)</dt>
<dd>Set to true in a configuration template to indicate
that the server works well enough and is available
for normal users. Used by the GUI to limit the choice
of configurations offered to users.
Has no effect in a user's server configuration.</dd>
<dt>peerType (no default, unshared)</dt>
<dd>Defines what a configuration is meant to be used for.
Used in templates and the resulting configs to tell a GUI
that special handling may be necessary. GUIs should ignore
unknown types.
The traditional SyncML configs use an empty value.
&quot;WebDAV&quot; is used for the WebDAV side in a local synchronization.</dd>
<dt>defaultPeer (no default, global)</dt>
<dd>the peer which is used by default in some frontends, like the sync-UI</dd>
</dl>
</div>
<div class="section" id="source-properties">
<h4>Source properties</h4>
<dl class="docutils">
<dt>sync (disabled, unshared, required)</dt>
<dd><p class="first">Requests a certain synchronization mode when initiating a sync:</p>
<blockquote>
<dl class="docutils">
<dt>two-way</dt>
<dd>only send/receive changes since last sync</dd>
<dt>slow</dt>
<dd>exchange all items</dd>
<dt>refresh-from-client</dt>
<dd>discard all remote items and replace with the items on the client</dd>
<dt>refresh-from-server</dt>
<dd>discard all local items and replace with the items on the server</dd>
<dt>one-way-from-client</dt>
<dd>transmit changes from client</dd>
<dt>one-way-from-server</dt>
<dd>transmit changes from server</dd>
<dt>disabled (or none)</dt>
<dd>synchronization disabled</dd>
</dl>
</blockquote>
<p><strong>WARNING</strong>: which side is <cite>client</cite> and which is <cite>server</cite> depends on
the value of the <tt class="docutils literal">peerIsClient</tt> property in the configuration.</p>
<p class="last">When accepting a sync session in a SyncML server (HTTP server), only
sources with sync != disabled are made available to the client,
which chooses the final sync mode based on its own configuration.
When accepting a sync session in a SyncML client (local sync with
the server contacting SyncEvolution on a device), the sync mode
specified in the client is typically overriden by the server.</p>
</dd>
<dt>uri (no default, unshared)</dt>
<dd>this is appended to the server's URL to identify the
server's database; if unset, the source name is used as
fallback</dd>
<dt>backend (select backend, shared)</dt>
<dd><p class="first">Specifies the SyncEvolution backend and thus the
data which is synchronized by this source. Each
backend may support multiple databases (see 'database'
property), different formats inside that database (see
'databaseFormat'), and different formats when talking to
the sync peer (see 'syncFormat' and 'forceSyncFormat').</p>
<p>A special 'virtual' backend combines several other
data sources and presents them as one set of items
to the peer. For example, Nokia phones typically
exchange tasks and events as part of one set of
calendar items.</p>
<p>Right now such a virtual backend is limited to
combining one calendar source with events and one
task source. They have to be specified in the
<tt class="docutils literal">database</tt> property, typically like this:
<tt class="docutils literal">calendar,todo</tt></p>
<p>Different sources combined in one virtual source must
have a common format. As with other backends,
the preferred format can be influenced via the 'syncFormat'
attribute.</p>
<p class="last">Here's the full list of potentially supported backends,
valid 'backend' values for each of them, and possible
formats. Note that SyncEvolution installations usually
support only a subset of the backends; that's why e.g.
&quot;addressbook&quot; is unambiguous although there are multiple
address book backends.</p>
</dd>
<dt>syncFormat (no default, unshared)</dt>
<dd><p class="first">When there are alternative formats for the same data,
each side of a sync offers all that it supports and marks one as
preferred. If set, this property overrides the format
that would normally be marked as preferred by a backend.</p>
<dl class="docutils">
<dt>Valid values depend on the backend. Here are some examples:</dt>
<dd><dl class="first last docutils">
<dt>contacts - text/vcard = vCard 3.0 format</dt>
<dd>text/x-vcard = legacy vCard 2.1 format</dd>
<dt>calendar - text/calendar = iCalendar 2.0 format</dt>
<dd>text/x-vcalendar = legacy vCalendar 1.0 format</dd>
</dl>
</dd>
</dl>
<p class="last">Errors while starting to sync and parsing and/or storing
items on either client or server can be caused by a mismatch between
the sync format and uri at the peer.</p>
</dd>
<dt>forceSyncFormat (FALSE, unshared)</dt>
<dd>Some peers get confused when offered multiple choices
for the sync format or pick the less optimal one.
In such a case, setting this property enforces that the
preferred format specified with 'syncFormat' is
really used.</dd>
<dt>database = evolutionsource (no default, shared)</dt>
<dd><p class="first">Picks one of the backend's databases:
depending on the backend, one can set the name
and/or a unique identifier.</p>
<p>Most backends have a default database,
like for example the system address book.
Not setting this property selects that default
database.</p>
<p>If the backend is a virtual data source,
this field must contain comma seperated list of
sub datasources actually used to store data.
If your sub datastore has a comma in name, you
must prevent taht comma from being mistaken as the
separator by preceding it with a backslash, like this:
<tt class="docutils literal"><span class="pre">database=Source1PartA\,PartB,Source2\\Backslash</span></tt></p>
<p class="last">To get a full list of available databases,
run <tt class="docutils literal">syncevolution <span class="pre">--print-databases</span></tt>. The name
is printed in front of the colon, followed by
an identifier in brackets. Usually the name is unique and can be
used to reference the data source. The default
data source is marked with &lt;default&gt; at the end
of the line, if there is a default.</p>
</dd>
<dt>databaseFormat (no default, shared)</dt>
<dd>Defines the data format to be used by the backend for its
own storage. Typically backends only support one format
and ignore this property, but for example the file backend
uses it. See the 'backend' property for more information.</dd>
<dt>databaseUser = evolutionuser (no default, shared), databasePassword = evolutionpassword (no default, shared)</dt>
<dd><p class="first">authentication for backend data source; password can be specified
in multiple ways, see SyncML server password for details</p>
<p class="last">Warning: setting database user/password in cases where it is not
needed, as for example with local Evolution calendars and addressbooks,
can cause the Evolution backend to hang.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="examples">
<h3>EXAMPLES</h3>
<p>List the known configuration templates:</p>
<pre class="literal-block">
syncevolution --template ?
</pre>
<p>Create a new configuration, using the existing Memotoo template:</p>
<pre class="literal-block">
syncevolution --configure \
              username=123456 \
              &quot;password=!&#64;#ABcd1234&quot; \
              memotoo
</pre>
<p>Note that putting passwords into the command line, even for
short-lived processes as the one above, is a security risk in shared
environments, because the password is visible to everyone on the
machine. To avoid this, remove the password from the command above,
then add the password to the right config.ini file with a text editor.
This command shows the directory containing the file:</p>
<pre class="literal-block">
syncevolution --print-configs
</pre>
<p>Review configuration:</p>
<pre class="literal-block">
syncevolution --print-config memotoo
</pre>
<p>Synchronize all sources:</p>
<pre class="literal-block">
syncevolution memotoo
</pre>
<p>Deactivate all sources:</p>
<pre class="literal-block">
syncevolution --configure \
              sync=none \
              memotoo
</pre>
<p>Activate address book synchronization again, using the --sync shortcut:</p>
<pre class="literal-block">
syncevolution --configure \
              --sync two-way \
              memotoo addressbook
</pre>
<p>Change the password for a configuration:</p>
<pre class="literal-block">
syncevolution --configure \
              password=foo \
              memotoo
</pre>
<p>Set up another configuration for under a different account, using
the same default databases as above:</p>
<pre class="literal-block">
syncevolution --configure \
              username=joe \
              password=foo \
              --template memotoo \
              memotoo_joe
</pre>
<p>Set up another configuration using the same account, but different
local databases (can be used to simulate synchronizing between two
clients, see <a class="reference internal" href="#exchanging-data">Exchanging Data</a>:</p>
<pre class="literal-block">
syncevolution --configure \
              username=123456 \
              password=!&#64;#ABcd1234&quot; \
              sync=none \
              memotoo&#64;other

syncevolution --configure \
              --source-property database=&lt;name of other address book&gt; \
              &#64;other addressbook

syncevolution --configure \
              sync=two-way \
              memotoo&#64;other addressbook

syncevolution memotoo
syncevolution memotoo&#64;other
</pre>
<p>Migrate a configuration from the &lt;= 0.7 format to the current one
and/or updates the configuration so that it looks like configurations
created anew with the current syncevolution:</p>
<pre class="literal-block">
syncevolution --migrate memotoo
</pre>
</div>
<div class="section" id="synchronization-beyond-syncml">
<span id="local-sync"></span><h3>Synchronization beyond SyncML</h3>
<p>In the simple examples above, SyncEvolution exchanges data with
servers via the SyncML protocol. Starting with release 1.2,
SyncEvolution also supports other protocols like CalDAV and
CardDAV.</p>
<p>These protocols are implemented in backends which look like data
sources. SyncEvolution then synchronizes data between a pair of
backends. Because the entire sync logic (matching of items, merging)
is done locally by SyncEvolution, this mode of operation is called
<em>local sync</em>.</p>
<p>Some examples of things that can be done with local sync:</p>
<ul class="simple">
<li>synchronize events with a CalDAV server and contacts with a CardDAV server</li>
<li>mirror a local database as items in a directory, with format conversion
and one-way or two-way data transfer (export vs. true syncing)</li>
</ul>
<p>Because local sync involves two sides, two configurations are
needed. One is called the <em>target config</em>. By convention it must be
called <tt class="docutils literal"><span class="pre">target-config&#64;&lt;some</span> context name&gt;</tt>, for example
<tt class="docutils literal"><span class="pre">target-config&#64;google-calendar</span></tt>. The target config holds properties
which apply to all sources inside that context, like user name,
password and URL for the server. Once configured, the target config
can be used to list/import/export/update items via the SyncEvolution
command line. It cannot be used for synchronization because it does
not defined what the items are supposed to be synchronized with.</p>
<p>For synchronization, a second <em>sync config</em> is needed. This config has
the same role as the traditional SyncML configs and is typically
defined in the same implicit <tt class="docutils literal">&#64;default</tt> context as those
configs. All configs in that context use the same local data. The sync
config defines the database pairs and the sync mode (one-way, two-way, ...).</p>
<p>The first step is to select a target config with
<tt class="docutils literal"><span class="pre">syncURL=local://&#64;&lt;some</span> context name&gt;</tt>. Multiple sync configs can
access the same target config. In the second step, the <tt class="docutils literal">uri</tt> of each
source in the sync config must be set to the name of the corresponding
source in the target config.  The <tt class="docutils literal">sync</tt> property in the sync config
defines the direction of the data flow. It can be set temporarily when
starting a synchronzation with the sync config.</p>
<blockquote>
<strong>Warning:</strong> because the client in the local sync starts the sync,
<tt class="docutils literal">preventSlowSync=0</tt> must be set in the target config to have an effect.</blockquote>
</div>
<div class="section" id="caldav-and-carddav">
<h3>CalDAV and CardDAV</h3>
<p>This section explains how to use local syncing for CalDAV and
CardDAV. Both protocols are based on WebDAV and are provided by the
same backend. They share <tt class="docutils literal">username/password/syncURL</tt> properties
defined in their target config.</p>
<p>The credentials must be provided if the server is password
protected. The <tt class="docutils literal">syncURL</tt> is optional if the <tt class="docutils literal">username</tt> is an email
address and the server supports auto-discovery of its CalDAV and/or
CardDAV services (using DNS SRV entries, <tt class="docutils literal"><span class="pre">.well-known</span></tt> URIs, properties
of the current principal, ...).</p>
<p>The <tt class="docutils literal">database</tt> property of each source can be set to the URL of a
specific <em>collection</em> (= database in WebDAV terminology). If not set,
then the WebDAV backend first locates the server based on <tt class="docutils literal">username</tt>
or <tt class="docutils literal">syncURL</tt> and then scans it for the default event resp. contact
collection. This is done once in the initial synchronization. At the end
of a successful synchroniation, the automatic choice is made permanent
by setting the <tt class="docutils literal">database</tt> property.</p>
<blockquote>
<strong>Warning:</strong> the protocols do not uniquely identify this default
collection. The backend tries to make an educated guess, but it might
pick the wrong one if the server provides more than one address book
or calendar. A future version of SyncEvolution will support listing
the available collections, but 1.2 does not yet support that.</blockquote>
<p>Configuration templates for Google Calendar, Yahoo Calendar and a
generic CalDAV/CardDAV server are included in SyncEvolution. The Yahoo
template also contains an entry for contact synchronization, but using
it is not recommended due to known server-side issues.</p>
<p>The following commands set up synchronization with a generic WebDAV
server that supports CalDAV, CardDAV and auto-discovery. For Google and Yahoo,
replace <tt class="docutils literal">webdav</tt> with <tt class="docutils literal"><span class="pre">google-calendar</span></tt> resp. <tt class="docutils literal">yahoo</tt> and remove the
<tt class="docutils literal">addressbook</tt> source when setting up the sync config.</p>
<pre class="literal-block">
# configure target config
syncevolution --configure \
             --template webdav \
             username=123456 \
             password=!&#64;#ABcd1234&quot; \
             target-config&#64;webdav

# configure sync config
syncevolution --configure \
              --template SyncEvolution_Client \
              syncURL=local://&#64;webdav \
              username= \
              password= \
              webdav \
              calendar addressbook

# initial slow sync
syncevolution --sync slow webdav

# incremental sync
syncevolution webdav
</pre>
</div>
<div class="section" id="notes">
<h3>NOTES</h3>
<div class="section" id="exchanging-data">
<h4>Exchanging Data</h4>
<p>SyncEvolution transmits address book entries as vCard 2.1 or 3.0
depending on the sync format chosen in the configuration. Evolution uses
3.0 internally, so SyncEvolution converts between the two formats as
needed. Calendar items and tasks can be sent and received in iCalendar
2.0 as well as vCalendar 1.0, but vCalendar 1.0 should be avoided if
possible because it cannot represent all data that Evolution stores.</p>
<div class="note">
<p class="first admonition-title">Note</p>
<p class="last">The Evolution backends are mentioned as examples;
the same applies to other data sources.</p>
</div>
<p>How the server stores the items depends on its implementation and
configuration. To check which data is preserved, one can use this
procedure (described for contacts, but works the same way for
calendars and tasks):</p>
<ol class="arabic simple">
<li>synchronize the address book with the server</li>
<li>create a new address book in Evolution and view it in Evolution
once (the second step is necessary in at least Evolution 2.0.4
to make the new address book usable in SyncEvolution)</li>
<li>add a configuration for that second address book and the
same URI on the SyncML server, see <a class="reference internal" href="#examples">EXAMPLES</a> above</li>
<li>synchronize again, this time using the other data source</li>
</ol>
<p>Now one can either compare the address books in Evolution or do that
automatically, described here for contacts:</p>
<ul class="simple">
<li>save the complete address books: mark all entries, save as vCard</li>
<li>invoke <cite>synccompare</cite> with two file names as arguments and it will
normalize and compare them automatically</li>
</ul>
<p>Normalizing is necessary because the order of cards and their
properties as well as other minor formatting aspects may be
different. The output comes from a side-by-side comparison, but
is augmented by the script so that the context of each change
is always the complete item that was modified. Lines or items
following a &quot;&gt;&quot; on the right side were added, those on the
left side followed by a &quot;&lt;&quot; were removed, and those with
a &quot;|&quot; between text on the left and right side were modified.</p>
<p>The automatic unit testing (see HACKING) contains a <cite>testItems</cite>
test which verifies the copying of special entries using the
same method.</p>
<p>Modifying one of the address books or even both at the same time and
then synchronizing back and forth can be used to verify that
SyncEvolution works as expected. If you do not trust SyncEvolution or
the server, then it is prudent to run these checks with a copy of the
original address book. Make a backup of the .evolution/addressbook
directory.</p>
</div>
<div class="section" id="item-changes-and-data-changes">
<h4>Item Changes and Data Changes</h4>
<p>SyncML clients and servers consider each entry in a database as one
item. Items can be added, removed or updated. This is the item change
information that client and server exchange during a normal,
incremental synchronization.</p>
<p>If an item is saved, removed locally, and reimported, then this is
usually reported to a peer as &quot;one item removed, one added&quot; because
the information available to SyncEvolution is not sufficient to
determine that this is in fact the same item. One exception are
iCalendar 2.0 items with their globally unique ID: the modification
above will be reported to the server as &quot;one item updated&quot;.</p>
<p>That is better, but still not quite correct because the content of the
item has not changed, only the meta information about it which is used
to detect changes. This cannot be avoided without creating additional
overhead for normal synchronizations.</p>
<p>SyncEvolution reports <em>item changes</em> (the number of added, removed and
updated items) as well as <em>data changes</em>. These data changes are
calculated by comparing database dumps using the <cite>synccompare</cite> tool.
Because this data comparison ignores information about which data
belongs to which item, it is able to detect that re-adding an item
that was removed earlier does not change the data, in contrast to the
item changes. On the other hand, removing one item and adding a
different one may look like updating just one item.</p>
</div>
<div class="section" id="automatic-backups-and-logging">
<h4>Automatic Backups and Logging</h4>
<p>To support recovery from a synchronization which damaged the
local data or modified it in an unexpected way, SyncEvolution
can create the following files during a synchronization:</p>
<ul class="simple">
<li>a dump of the data in a format which can be restored by
SyncEvolution, usually a single file per item containing
in a standard text format (VCARD/VCALENDAR)</li>
<li>a full log file with debug information</li>
<li>another dump of the data after the synchronization for
automatic comparison of the before/after state with
<cite>synccompare</cite></li>
</ul>
<p>If the sync configuration property <tt class="docutils literal">logdir</tt> is set, then
a new directory will be created for each synchronization
in that directory, using the format <cite>&lt;peer&gt;-&lt;yyyy&gt;-&lt;mm&gt;-&lt;dd&gt;-&lt;hh&gt;-&lt;mm&gt;[-&lt;seq&gt;]</cite>
with the various fields filled in with the time when the
synchronization started. The sequence suffix will only be
used when necessary to make the name unique. By default,
SyncEvolution will never delete any data in that log
directory unless explicitly asked to keep only a limited
number of previous log directories.</p>
<p>This is done by setting the <tt class="docutils literal">maxlogdirs</tt> limit to something
different than the empty string and 0. If a limit is set,
then SyncEvolution will only keep that many log directories
and start removing the &quot;less interesting&quot; ones when it reaches
the limit. Less interesting are those where no data changed
and no error occurred.</p>
<p>To avoid writing any additional log file or database dumps during
a synchronization, the <tt class="docutils literal">logdir</tt> can be set to <tt class="docutils literal">none</tt>. To reduce
the verbosity of the log, set <tt class="docutils literal">loglevel</tt>. If not set or 0, then
the verbosity is set to 3 = DEBUG when writing to a log file and
2 = INFO when writing to the console directly. To debug issues
involving data conversion, level 4 also dumps the content of
items into the log.</p>
</div>
</div>
<div class="section" id="environment">
<h3>ENVIRONMENT</h3>
<p>The following environment variables control where SyncEvolution finds
files and other aspects of its operations.</p>
<dl class="docutils">
<dt>http_proxy</dt>
<dd>Overrides the proxy settings temporarily. Setting it to an empty value
disables the normal proxy settings.</dd>
<dt>HOME/XDG_CACHE_HOME/XDG_CONFIG_HOME</dt>
<dd>SyncEvolution follows the <a class="reference external" href="http://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html">XDG</a> desktop standard for its files. By default,
<cite>$HOME/.config/syncevolution</cite> is the location for configuration files.
<cite>$HOME/.cache/syncevolution</cite> holds session directories with log files and
database dumps.</dd>
</dl>
<dl class="docutils">
<dt>SYNCEVOLUTION_DEBUG</dt>
<dd>Setting this to any value disables the filtering of stdout and stderr
that SyncEvolution employs to keep noise from system libraries out
of the command line output.</dd>
<dt>SYNCEVOLUTION_GNUTLS_DEBUG</dt>
<dd>Enables additional debugging output when using the libsoup HTTP transport library.</dd>
<dt>SYNCEVOLUTION_BACKEND_DIR</dt>
<dd>Overrides the default path to plugins, normally <cite>/usr/lib/syncevolution/backends</cite>.</dd>
<dt>SYNCEVOLUTION_TEMPLATE_DIR</dt>
<dd>Overrides the default path to template files, normally
<cite>/usr/share/syncevolution/templates</cite>.</dd>
<dt>SYNCEVOLUTION_XML_CONFIG_DIR</dt>
<dd><p class="first">Overrides the default path to the Synthesis XML configuration files, normally
<cite>/usr/share/syncevolution/xml</cite>. These files are merged into one configuration
each time the Synthesis SyncML engine is started as part of a sync session.</p>
<p class="last">Note that in addition to this directory, SyncEvolution also always
searches for configuration files inside <cite>$HOME/.config/syncevolution-xml</cite>.
Files with the same relative path and name as in <cite>/usr/share/syncevolution/xml</cite>
override those files, others extend the final configuration.</p>
</dd>
</dl>
</div>
<div class="section" id="bugs">
<h3>BUGS</h3>
<p>See <a class="reference external" href="http://syncevolution.org/documentation/known-issues">known issues</a> and the <a class="reference external" href="http://syncevolution.org/support">support</a> web page for more information.</p>
</div>
<div class="section" id="see-also">
<h3>SEE ALSO</h3>
<p><a class="reference external" href="http://syncevolution.org">http://syncevolution.org</a></p>
</div>
<div class="section" id="authors">
<h3>AUTHORS</h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Main developer:</th><td class="field-body">Patrick Ohly &lt;<a class="reference external" href="mailto:patrick.ohly&#64;intel.com">patrick.ohly&#64;intel.com</a>&gt;, <a class="reference external" href="http://www.estamos.de">http://www.estamos.de</a></td>
</tr>
<tr class="field"><th class="field-name">Contributors:</th><td class="field-body"><a class="reference external" href="http://syncevolution.org/about/contributors">http://syncevolution.org/about/contributors</a></td>
</tr>
<tr class="field"><th class="field-name" colspan="2">To contact the project publicly (preferred):</th></tr>
<tr><td>&nbsp;</td><td class="field-body"><a class="reference external" href="mailto:syncevolution&#64;syncevolution.org">syncevolution&#64;syncevolution.org</a></td>
</tr>
<tr class="field"><th class="field-name" colspan="2">Intel-internal team mailing list (confidential):</th></tr>
<tr><td>&nbsp;</td><td class="field-body"><a class="reference external" href="mailto:syncevolution&#64;lists.intel.com">syncevolution&#64;lists.intel.com</a></td>
</tr>
</tbody>
</table>
</div>
</div>
</body>
</html>
